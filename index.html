<!-- ================================================================ -->
<!-- index.html -->
<!-- ================================================================ -->

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle Financeiro</title>
    
    <!-- CSS EXTERNOS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    
    <!-- CSS DO SISTEMA -->
    <link rel="stylesheet" href="css/layoutGeral.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/receita.css">
    <link rel="stylesheet" href="css/despesa.css">
    <link rel="stylesheet" href="css/notificacao.css">
    <link rel="stylesheet" href="css/rel.css">
    <link rel="stylesheet" href="css/config.css">
</head>
<body>

    
<!-- ================================================================ -->
<!-- ESTRUTURA PRINCIPAL DA APLICAÇÃO -->
<!-- ================================================================ -->
<div class="app-container">
    
    <!-- ============================================================ -->
    <!-- SIDEBAR DE NAVEGAÇÃO PRINCIPAL -->
    <!-- ============================================================ -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>Sistema Financeiro</h3>
            <div class="user-info-sidebar">
                <span id="nome-usuario-sidebar"></span>
            </div>
        </div>
        <ul class="sidebar-nav">
            <li class="nav-item">
                <a href="#" class="nav-link active" data-section="dashboard">
                    <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
                    <span class="nav-text">Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" data-section="meses">
                    <span class="nav-icon"><i class="fas fa-calendar-alt"></i></span>
                    <span class="nav-text">Meses</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" data-section="relatorios" id="nav-relatorios">
                    <span class="nav-icon"><i class="fas fa-chart-bar"></i></span>
                    <span class="nav-text">Relatórios</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="#" class="nav-link" data-section="config">
                    <span class="nav-icon"><i class="fas fa-user-cog"></i></span>
                    <span class="nav-text">Configurações</span>
                </a>
            </li>
        </ul>

        <div class="sidebar-footer">
            <div class="system-info">
                <div class="info-row">
                    <i class="fas fa-code-branch"></i>
                    <span>v<span id="system-version">1.0.0</span></span>
                </div>
                <div class="info-row info-secondary">
                    <i class="fas fa-calendar"></i>
                    <span id="system-update-date">03/01/2026</span>
                </div>
            </div>
        </div>
    </nav>

   <main class="main-content">
        <header class="main-header">
            <!-- ✅ BANNER DE MENSAGENS ESPECIAIS -->
            <div id="banner-financeiro" class="banner-alerta" style="display: none;">
                <div class="banner-conteudo">
                    <i class="fas fa-info-circle"></i>
                    <span id="mensagem-dia"></span>
                </div>
                <button type="button" class="btn-fechar-banner" id="btn-fechar-banner">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- ✅ AÇÕES DO HEADER -->
            <div class="header-actions">
                <!-- Seletor de Ano com Dropdown -->
                <div class="periodo-selector">
                    <button id="btn-ano-anterior" title="Ano Anterior"><i class="fas fa-chevron-left"></i></button>
                    <div class="ano-dropdown">
                        <button id="ano-atual-btn" class="ano-atual-display">2026</button>
                        <div id="dropdown-anos" class="dropdown-anos-lista" style="display: none;">
                            <!-- Será preenchido dinamicamente -->
                        </div>
                    </div>
                    <button id="btn-proximo-ano" title="Próximo Ano"><i class="fas fa-chevron-right"></i></button>
                </div>

                <!-- Menu de Gerenciamento de Ano -->
                <div class="ano-menu-container">
                    <button class="btn-ano-menu" id="btn-ano-menu" title="Gerenciar Ano">
                        <i class="fas fa-cog"></i>
                    </button>
                    <div id="dropdown-ano-menu" class="dropdown-ano-menu" style="display: none;">
                        <button id="btn-novo-ano-menu" class="dropdown-item">
                            <i class="fas fa-calendar-plus"></i> Criar Novo Ano
                        </button>
                        <button id="btn-excluir-ano-menu" class="dropdown-item dropdown-item-danger">
                            <i class="fas fa-calendar-times"></i> Excluir Ano Atual
                        </button>
                        <div class="dropdown-divider"></div>
                        <button id="btn-alterar-senha-menu" class="dropdown-item">
                            <i class="fas fa-key"></i> Alterar Senha
                        </button>
                    </div>
                </div>

                <!-- Notícias -->
                <button id="btn-toggle-noticias" class="btn-icon" type="button" title="Ver Notícias">
                    <i class="fas fa-newspaper"></i>
                </button>

                <!-- Notificações -->
                <div class="notification-icon-container">
                    <button class="btn-icon" id="notification-bell" type="button" aria-label="Notificações">
                        <i class="fas fa-bell"></i>
                    </button>
                    <span class="notification-badge hidden" id="notification-count">0</span>
                </div>

                <!-- Logout -->
                <button class="btn-icon btn-logout" id="logout-btn" title="Sair">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </header>

        <div id="marquee-noticias" class="marquee-container" style="display: none;">
            <div class="marquee-content" id="conteudo-noticias">
        </div>
    </div>

        <!-- ======================================================== -->
        <!-- BARRA DE AÇÕES RÁPIDAS -->
        <!-- ======================================================== -->
        <div class="secondary-action-bar">
            <!-- ✅ AÇÕES PRINCIPAIS -->
            <div class="action-group action-primary">
                <button id="btn-adicionar-receita-rapida" class="btn btn-success btn-lg">
                    <i class="fas fa-plus"></i> RECEITA
                </button>
                <button id="btn-adicionar-despesa-rapida" class="btn btn-danger btn-lg">
                    <i class="fas fa-plus"></i> DESPESA
                </button>
            </div>

            <!-- ✅ COTAÇÕES COMPACTAS -->
            <div class="cambio-container-compact" title="Cotações em tempo real">
                <i class="fas fa-exchange-alt"></i>
                <span id="cotacoes-compact">Carregando...</span>
            </div>

            <!-- ✅ AÇÕES SECUNDÁRIAS -->
            <div class="action-group action-group-right">
                <button id="btn-refresh" class="btn btn-icon-secondary" title="Atualizar Dados">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button id="btn-lock-system" class="btn btn-icon-secondary" title="Bloquear Sistema">
                    <i class="fas fa-lock"></i>
                </button>
            </div>
        </div>

        <!-- ======================================================== -->
        <!-- CONTAINER DE TODAS AS SEÇÕES -->
        <!-- SEÇÃO 1: DASHBOARD/ANÁLISE FINANCEIRA -->
        <!-- ======================================================== -->
       <div class="content-area">
    <section class="dashboard-section active" id="dashboard-section">
        <div class="resumo-cards">
            <div class="card card-receitas">
                <div class="card-icon">
                    <i class="fas fa-arrow-up"></i>
                </div>
                <div class="card-content">
                    <h3>RECEITAS TOTAIS</h3>
                    <p id="dashboard-total-receitas" class="card-valor">R$ 0,00</p>
                    <span class="card-subtitle">Todas as receitas do ano</span>
                </div>
            </div>
            <div class="card card-despesas">
                <div class="card-icon">
                    <i class="fas fa-arrow-down"></i>
                </div>
                <div class="card-content">
                    <h3>DESPESAS TOTAIS</h3>
                    <p id="dashboard-total-despesas" class="card-valor">R$ 0,00</p>
                    <span class="card-subtitle">Todas as despesas do ano</span>
                </div>
            </div>
            <div class="card card-saldo">
                <div class="card-icon">
                    <i class="fas fa-wallet"></i>
                </div>
                <div class="card-content">
                    <h3>SALDO ANUAL</h3>
                    <p id="dashboard-saldo-anual" class="card-valor">R$ 0,00</p>
                    <span class="card-subtitle">Balanço receitas - despesas</span>
                </div>
            </div>
            <div class="card card-juros">
                <div class="card-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <div class="card-content">
                    <h3>JUROS PAGOS</h3>
                    <p id="dashboard-total-juros" class="card-valor">R$ 0,00</p>
                    <span class="card-subtitle">Total de juros pagos no ano</span>
                </div>
            </div>
            <div class="card card-economias">
                <div class="card-icon">
                    <i class="fas fa-piggy-bank"></i>
                </div>
                <div class="card-content">
                    <h3>ECONOMIAS</h3>
                    <p id="dashboard-total-economias" class="card-valor">R$ 0,00</p>
                    <span class="card-subtitle">Valor economizado no ano</span>
                </div>
            </div>
        </div>

        <div class="dashboard-card dashboard-card-full">
            <h3 class="header-com-zoom">
                <span>BALANÇO</span>
                <button class="btn-expandir" data-chart="balancoChart">[ ]</button>
            </h3>
            <div class="chart-container">
                <canvas id="balanco-chart"></canvas>
            </div>
        </div>

        <div class="dashboard-grid">

            <div class="dashboard-card">
                <h3>
                    <span>TENDÊNCIA ANUAL</span>
                    <div class="filtros-header">
                        <select class="filter-select" id="tendencia-tipo-filter" onchange="filtrarTendencia()">
                            <option value="ambos">Receitas e Despesas</option>
                            <option value="receitas">Apenas Receitas</option>
                            <option value="despesas">Apenas Despesas</option>
                        </select>
                        <select class="filter-select" id="tendencia-categoria-filter" onchange="filtrarTendencia()">
                            <option value="">Todas as categorias</option>
                        </select>
                        <select class="filter-select" id="tendencia-pagamento-filter" onchange="filtrarTendencia()">
                            <option value="todas">Todas as formas</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Débito</option>
                            <option value="credito">Crédito</option>
                        </select>
                        <button class="btn-expandir" data-chart="tendenciaChart">[ ]</button>
                    </div>
                </h3>
                <div class="chart-container">
                    <canvas id="tendencia-chart"></canvas>
                </div>
            </div>

            <div class="dashboard-card">
                <h3>
                    <span>ENTRADAS E SAÍDAS</span>
                    <div class="filtros-header">
                        <select class="filter-select" id="receitas-despesas-tipo-filter" onchange="filtrarReceitasDespesas()">
                            <option value="ambos">Receitas e Despesas</option>
                            <option value="receitas">Apenas Receitas</option>
                            <option value="despesas">Apenas Despesas</option>
                        </select>
                        <select class="filter-select" id="receitas-despesas-categoria-filter" onchange="filtrarReceitasDespesas()">
                            <option value="">Todas as categorias</option>
                        </select>
                        <select class="filter-select" id="receitas-despesas-pagamento-filter" onchange="filtrarReceitasDespesas()">
                            <option value="todas">Todas as formas</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Débito</option>
                            <option value="credito">Crédito</option>
                        </select>
                        <button class="btn-expandir" data-chart="receitasDespesasChart">[ ]</button>
                    </div>
                </h3>
                <div class="chart-container">
                    <canvas id="receitas-despesas-chart"></canvas>
                </div>
            </div>

            <div class="dashboard-card">
                <h3>
                    <span>CATEGORIAS ANUAIS</span>
                    <div class="filtros-header">
                        <select class="filter-select" id="categorias-anual-categoria-filter" onchange="filtrarCategoriasAnual()">
                            <option value="">Todas as categorias</option>
                        </select>
                        <select class="filter-select" id="categorias-anual-pagamento-filter" onchange="filtrarCategoriasAnual()">
                            <option value="todas">Todas as formas</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Débito</option>
                            <option value="credito">Crédito</option>
                        </select>
                        <button class="btn-expandir" data-chart="categoriasBarrasChart">[ ]</button>
                    </div>
                </h3>
                <div class="chart-container">
                    <canvas id="categorias-barras-chart"></canvas>
                </div>
            </div>
            
            <div class="dashboard-card">
                <h3>
                    <span>CATEGORIAS MENSAIS</span>
                    <div class="filtros-header">
                        <select class="filter-select" id="categorias-mensal-categoria-filter" onchange="filtrarCategoriasMensal()">
                            <option value="">Todas as categorias</option>
                        </select>
                        <select class="filter-select" id="categorias-mensal-pagamento-filter" onchange="filtrarCategoriasMensal()">
                            <option value="todas">Todas as formas</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Débito</option>
                            <option value="credito">Crédito</option>
                        </select>
                        <button class="btn-expandir" data-chart="categoriasEmpilhadasChart">[ ]</button>
                    </div>
                </h3>
                <div class="chart-container">
                    <canvas id="categorias-mensais-chart"></canvas>
                </div>
            </div>

     <div class="dashboard-card">
                <h3>
                    <span>FORMAS DE PAGAMENTO</span>
                    <div class="filtros-header">
                        <select class="filter-select" id="forma-pagamento-categoria-filter" onchange="filtrarFormaPagamento()">
                            <option value="">Todas as categorias</option>
                        </select>
                        <select class="filter-select" id="forma-pagamento-pagamento-filter" onchange="filtrarFormaPagamento()">
                            <option value="todas">Todas as formas</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Débito</option>
                            <option value="credito">Crédito</option>
                        </select>
                        <button class="btn-expandir" data-chart="formaPagamentoChart">[ ]</button>
                    </div>
                </h3>
                <div class="chart-container">
                    <canvas id="forma-pagamento-chart"></canvas>
                </div>
            </div>


            <div class="dashboard-card">
                <h3>
                    <span>MÉDIA POR CATEGORIA (ANUAL)</span>
                    <div class="filtros-header">
                        <select class="filter-select" id="media-cat-pagamento-filter" onchange="renderizarGraficoMediaCategorias()">
                            <option value="todas">Todas as formas</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Débito</option>
                            <option value="credito">Crédito</option>
                        </select>
                        <button class="btn-expandir" data-chart="mediaCategoriasChart">[ ]</button>
                    </div>
                </h3>
                <div class="chart-container" style="position: relative; height: 350px;">
                    <canvas id="media-categorias-chart"></canvas>
                </div>
            </div>



            <div class="dashboard-card">
                <h3>
                    <span>JUROS MENSAIS</span>
                    <div class="filtros-header">
                        <select class="filter-select" id="juros-categoria-filter" onchange="filtrarJuros()">
                            <option value="">Todas as categorias</option>
                        </select>
                        <select class="filter-select" id="juros-pagamento-filter" onchange="filtrarJuros()">
                            <option value="todas">Todas as formas</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Débito</option>
                            <option value="credito">Crédito</option>
                        </select>
                        <select class="filter-select" id="juros-status-filter" onchange="filtrarJuros()">
                            <option value="todos">Todos</option>
                            <option value="pagos">Apenas Pagos</option>
                            <option value="pendentes">Apenas Pendentes</option>
                        </select>
                        <button class="btn-expandir" data-chart="jurosChart">[ ]</button>
                    </div>
                </h3>
                <div class="chart-container">
                    <canvas id="juros-chart"></canvas>
                </div>
                <div class="estatisticas-container">
                    <div class="estatistica-item">
                        <span class="estatistica-label">Juros Pendentes:</span>
                        <span class="estatistica-valor" id="juros-pendentes-valor">R$ 0,00</span>
                    </div>
                    <div class="estatistica-item">
                        <span class="estatistica-label">% Juros Pagos:</span>
                        <span class="estatistica-valor" id="juros-pagos-percentual">0%</span>
                    </div>
                </div>
            </div>

            <div class="dashboard-card">
                <h3>
                    <span>PARCELAMENTOS MENSAIS</span>
                    <div class="filtros-header">
                        <select class="filter-select" id="parcelamentos-categoria-filter" onchange="filtrarParcelamentos()">
                            <option value="">Todas as categorias</option>
                        </select>
                        <select class="filter-select" id="parcelamentos-pagamento-filter" onchange="filtrarParcelamentos()">
                            <option value="todas">Todas as formas</option>
                            <option value="pix">PIX</option>
                            <option value="debito">Débito</option>
                            <option value="credito">Crédito</option>
                        </select>
                        <select class="filter-select" id="parcelamentos-status-filter" onchange="filtrarParcelamentos()">
                            <option value="todos">Todos</option>
                            <option value="pagos">Apenas Pagos</option>
                            <option value="pendentes">Apenas Pendentes</option>
                        </select>
                        <button class="btn-expandir" data-chart="parcelamentosChart">[ ]</button>
                    </div>
                </h3>
                <div class="chart-container">
                    <canvas id="parcelamentos-chart"></canvas>
                </div>
                <div class="estatisticas-container">
                    <div class="estatistica-item">
                        <span class="estatistica-label">Parcelas Pendentes:</span>
                        <span class="estatistica-valor" id="parcelas-pendentes-valor">R$ 0,00</span>
                    </div>
                    <div class="estatistica-item">
                        <span class="estatistica-label">% Parcelas Pagas:</span>
                        <span class="estatistica-valor" id="parcelas-pagas-percentual">0%</span>
                    </div>
                </div>
            </div>

        

        </div>
    </section>
</div>

<div id="modal-zoom-grafico" class="modal-zoom-container">
    <div class="modal-zoom-content">
        <span id="fechar-modal-zoom" class="modal-zoom-close">&times;</span>
        <canvas id="canvas-zoom-render"></canvas>
    </div>
</div>


    <!-- ================================================== -->
    <!-- SEÇÃO 2: VISUALIZAÇÃO MENSAL -->
    <!-- ================================================== -->
    <section class="meses-section" id="meses-section">
        <div class="meses-container">
        </div>
    </section>

<!-- ================================================================
   SEÇÃO DE RELATÓRIOS
   ================================================================ -->
<section class="relatorios-section" id="relatorios-section">
    <div class="relatorios-filtros-container">
        <div class="filtros-card">
            
            <div class="filtros-linha filtros-linha-super-compacta">
                <div class="filtro-grupo filtro-periodo">
                    <label for="filtro-periodo">Período:</label>
                    <select id="filtro-periodo" class="form-select">
                        <option value="mes-atual">Mês Atual</option>
                        <option value="mes-anterior">Mês Anterior</option>
                        <option value="ultimos-3-meses">Últimos 3 Meses</option>
                        <option value="ultimos-6-meses">Últimos 6 Meses</option>
                        <option value="ano-atual">Ano Atual</option>
                        <option value="ano-anterior">Ano Anterior</option>
                        <option value="personalizado">Período Personalizado</option>
                    </select>
                </div>
                
                <div class="filtro-grupo filtro-tipo">
                    <label for="filtro-tipo-relatorio">Tipo:</label>
                    <select id="filtro-tipo-relatorio" class="form-select">
                        <option value="completo">Completo</option>
                        <option value="apenas-receitas">Receitas</option>
                        <option value="apenas-despesas">Despesas</option>
                        <option value="por-categoria">Por Categoria</option>
                        <option value="por-forma-pagamento">Por Pagamento</option>
                        <option value="parcelamentos">Parcelamentos</option>
                        <option value="gastos-reais">Gastos Reais</option>
                    </select>
                </div>
                
                <div class="filtro-grupo filtro-criterio">
                    <label for="filtro-criterio-data">Data:</label>
                    <select id="filtro-criterio-data" class="form-select">
                        <option value="vencimento">Vencimento</option>
                        <option value="compra">Compra</option>
                        <option value="pagamento">Pagamento</option>
                        <option value="mista">Mista</option>
                    </select>
                </div>

                <div class="filtro-grupo filtro-categoria">
                    <label for="filtro-categoria-relatorio">Categoria:</label>
                    <select id="filtro-categoria-relatorio" class="form-select">
                        <option value="todas">Todas</option>
                    </select>
                </div>

                <div class="filtro-grupo filtro-status">
                    <label for="filtro-status-relatorio">Status:</label>
                    <select id="filtro-status-relatorio" class="form-select">
                        <option value="todos">Todos</option>
                        <option value="quitadas">Pagas</option>
                        <option value="pendentes">Pendentes</option>
                        <option value="atrasadas">Atrasadas</option>
                    </select>
                </div>

                <div class="filtro-grupo filtro-ordenacao">
                    <label for="filtro-ordenacao">Ordenar:</label>
                    <select id="filtro-ordenacao" class="form-select">
                        <option value="data">Data</option>
                        <option value="valor-desc">Maior Valor</option>
                        <option value="valor-asc">Menor Valor</option>
                        <option value="categoria">Categoria</option>
                        <option value="forma-pagamento">Pagamento</option>
                        <option value="descricao">Descrição</option>
                    </select>
                </div>
            </div>

            <!-- PERÍODO PERSONALIZADO -->
            <div id="periodo-personalizado-container" class="periodo-personalizado-ultra-compacto hidden">
                <label for="data-inicio-relatorio">De:</label>
                <input type="date" id="data-inicio-relatorio" class="form-input">
                <label for="data-fim-relatorio">Até:</label>
                <input type="date" id="data-fim-relatorio" class="form-input">
            </div>
            <!-- LINHA 2: Checkboxes -->
            <div class="filtros-linha filtros-linha-checkboxes-inline">
                <div class="grupo-checkboxes-completo">
                    <span class="grupo-label">Pagamento:</span>
                    <label class="checkbox-mini">
                        <input type="checkbox" id="forma-todas" value="todas" checked>
                        <span>Todas</span>
                    </label>
                    <label class="checkbox-mini">
                        <input type="checkbox" id="forma-pix" value="pix">
                        <span>PIX</span>
                    </label>
                    <label class="checkbox-mini">
                        <input type="checkbox" id="forma-debito" value="debito">
                        <span>Débito</span>
                    </label>
                    <label class="checkbox-mini">
                        <input type="checkbox" id="forma-credito" value="credito">
                        <span>Crédito</span>
                    </label>

                    <span class="grupo-label grupo-label-separador">Opções:</span>
                    <label class="checkbox-mini">
                        <input type="checkbox" id="incluir-transferencias">
                        <span>Transferências</span>
                    </label>
                    <label class="checkbox-mini">
                        <input type="checkbox" id="agrupar-parcelamentos">
                        <span>Agrupar</span>
                    </label>
                    <label class="checkbox-mini">
                        <input type="checkbox" id="mostrar-projecoes">
                        <span>Projeções</span>
                    </label>
                </div>
            </div>
            <div id="resumo-filtros-aplicados" class="filtros-resumo hidden">
                <h4>Filtros Aplicados:</h4>
                <div id="texto-filtros-resumo"></div>
            </div>
            <div class="filtros-acoes">
                <button id="btn-gerar-relatorio" class="btn btn-primary">
                    <i class="fas fa-search"></i>
                    Gerar Relatório
                </button>
                <button id="btn-limpar-filtros-relatorio" class="btn btn-secondary">
                    <i class="fas fa-times"></i>
                    Limpar Filtros
                </button>
                <button id="btn-exportar-pdf-relatorio" class="btn btn-success" disabled>
                    <i class="fas fa-file-pdf"></i>
                    Exportar PDF
                </button>
            </div>
        </div>
    </div>

    <!-- RESULTADOS DOS RELATÓRIOS -->
    <div class="relatorios-resultados">
        <!-- Resumo Executivo -->
        <div id="resumo-executivo" class="resultado-secao hidden">
            <div class="secao-header">
                <h3><i class="fas fa-chart-line"></i> Resumo Executivo</h3>
            </div>
            <div class="resumo-cards">
                <div class="resumo-card receitas">
                    <div class="card-header">
                        <i class="fas fa-arrow-up"></i>
                        <span>Total de Receitas</span>
                    </div>
                    <div class="card-valor" id="resumo-total-receitas">R$ 0,00</div>
                    <div class="card-info" id="resumo-count-receitas">0 transações</div>
                </div>
                
                <div class="resumo-card despesas">
                    <div class="card-header">
                        <i class="fas fa-arrow-down"></i>
                        <span>Total de Despesas</span>
                    </div>
                    <div class="card-valor" id="resumo-total-despesas">R$ 0,00</div>
                    <div class="card-info" id="resumo-count-despesas">0 transações</div>
                </div>
                
                <div class="resumo-card saldo">
                    <div class="card-header">
                        <i class="fas fa-balance-scale"></i>
                        <span>Saldo Líquido</span>
                    </div>
                    <div class="card-valor" id="resumo-saldo-liquido">R$ 0,00</div>
                    <div class="card-info" id="resumo-economia">0% de economia</div>
                </div>
                
                <div class="resumo-card juros">
                    <div class="card-header">
                        <i class="fas fa-percentage"></i>
                        <span>Juros Pagos</span>
                    </div>
                    <div class="card-valor" id="resumo-total-juros">R$ 0,00</div>
                    <div class="card-info" id="resumo-percent-juros">0% do total</div>
                </div>
            </div>
        </div>

        <!-- Comparativo por Forma de Pagamento -->
        <div id="comparativo-formas-pagamento" class="resultado-secao hidden">
            <div class="secao-header">
                <h3><i class="fas fa-chart-bar"></i> Comparativo por Forma de Pagamento</h3>
            </div>
            <div class="comparativo-cards">
                <div class="comparativo-card pix">
                    <div class="card-header">
                        <i class="fas fa-mobile-alt"></i>
                        <span>PIX</span>
                    </div>
                    <div class="card-valor" id="comparativo-pix-valor">R$ 0,00</div>
                    <div class="card-info">
                        <span id="comparativo-pix-count">0 transações</span>
                        <span id="comparativo-pix-percent">0%</span>
                    </div>
                </div>
                
                <div class="comparativo-card debito">
                    <div class="card-header">
                        <i class="fas fa-credit-card"></i>
                        <span>Débito</span>
                    </div>
                    <div class="card-valor" id="comparativo-debito-valor">R$ 0,00</div>
                    <div class="card-info">
                        <span id="comparativo-debito-count">0 transações</span>
                        <span id="comparativo-debito-percent">0%</span>
                    </div>
                </div>
                
                <div class="comparativo-card credito">
                    <div class="card-header">
                        <i class="fas fa-credit-card"></i>
                        <span>Crédito</span>
                    </div>
                    <div class="card-valor" id="comparativo-credito-valor">R$ 0,00</div>
                    <div class="card-info">
                        <span id="comparativo-credito-count">0 transações</span>
                        <span id="comparativo-credito-percent">0%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Análise de Gastos Reais -->
        <div id="analise-gastos-reais" class="resultado-secao hidden">
            <div class="secao-header">
                <h3><i class="fas fa-calculator"></i> Análise de Gastos Reais</h3>
            </div>
            <div class="gastos-reais-cards">
                <div class="gasto-real-card total">
                    <div class="card-header">
                        <i class="fas fa-coins"></i>
                        <span>Total Gasto no Período</span>
                    </div>
                    <div class="card-valor" id="total-gastos-reais">R$ 0,00</div>
                    <div class="card-info" id="gastos-reais-criterio">Por data de vencimento</div>
                </div>
                
                <div class="gasto-real-card media">
                    <div class="card-header">
                        <i class="fas fa-calendar-day"></i>
                        <span>Média Diária</span>
                    </div>
                    <div class="card-valor" id="media-diaria-gastos">R$ 0,00</div>
                    <div class="card-info" id="dias-periodo">0 dias</div>
                </div>
                
                <div class="gasto-real-card maior">
                    <div class="card-header">
                        <i class="fas fa-arrow-up"></i>
                        <span>Maior Gasto</span>
                    </div>
                    <div class="card-valor" id="maior-gasto-periodo">R$ 0,00</div>
                    <div class="card-info" id="maior-gasto-descricao">-</div>
                </div>
            </div>
        </div>

        <!-- Detalhamento por Categoria -->
        <div id="detalhamento-categorias" class="resultado-secao hidden">
            <div class="secao-header">
                <h3><i class="fas fa-tags"></i> Detalhamento por Categoria</h3>
            </div>
            <div class="tabela-responsiva">
                <table class="relatorio-tabela">
                    <thead>
                        <tr>
                            <th>Categoria</th>
                            <th>Receitas</th>
                            <th>Despesas</th>
                            <th>Saldo</th>
                            <th>% do Total</th>
                            <th>Transações</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-categorias-body">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Detalhamento por Forma de Pagamento -->
        <div id="detalhamento-pagamento" class="resultado-secao hidden">
            <div class="secao-header">
                <h3><i class="fas fa-credit-card"></i> Detalhamento por Forma de Pagamento</h3>
            </div>
            <div class="pagamento-resumo">
                <div class="pagamento-item pix">
                    <div class="pagamento-header">
                        <i class="fas fa-mobile-alt"></i>
                        <span>PIX</span>
                    </div>
                    <div class="pagamento-valor" id="pagamento-pix-valor">R$ 0,00</div>
                    <div class="pagamento-info">
                        <span id="pagamento-pix-count">0 transações</span>
                        <span id="pagamento-pix-percent">0%</span>
                    </div>
                </div>
                
                <div class="pagamento-item debito">
                    <div class="pagamento-header">
                        <i class="fas fa-credit-card"></i>
                        <span>Débito</span>
                    </div>
                    <div class="pagamento-valor" id="pagamento-debito-valor">R$ 0,00</div>
                    <div class="pagamento-info">
                        <span id="pagamento-debito-count">0 transações</span>
                        <span id="pagamento-debito-percent">0%</span>
                    </div>
                </div>
                
                <div class="pagamento-item credito">
                    <div class="pagamento-header">
                        <i class="fas fa-credit-card"></i>
                        <span>Crédito</span>
                    </div>
                    <div class="pagamento-valor" id="pagamento-credito-valor">R$ 0,00</div>
                    <div class="pagamento-info">
                        <span id="pagamento-credito-count">0 transações</span>
                        <span id="pagamento-credito-percent">0%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de Transações -->
        <div id="lista-transacoes" class="resultado-secao hidden">
            <div class="secao-header">
                <h3><i class="fas fa-list"></i> Lista de Transações</h3>
                <div class="transacoes-info">
                    <p id="transacoes-count-info">Mostrando 0 transações</p>
                </div>
            </div>
            <div class="tabela-responsiva">
                <table class="relatorio-tabela">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Tipo</th>
                            <th>Descrição</th>
                            <th>Categoria</th>
                            <th>Forma Pagamento</th>
                            <th>Valor</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-transacoes-body">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Detalhamento de Parcelamentos -->
        <div id="detalhamento-parcelamentos" class="resultado-secao hidden">
            <div class="secao-header">
                <h3><i class="fas fa-credit-card"></i> Parcelamentos</h3>
            </div>
            <div class="tabela-responsiva">
                <table class="relatorio-tabela">
                    <thead>
                        <tr>
                            <th>Descrição</th>
                            <th>Valor Total</th>
                            <th>Parcelas</th>
                            <th>Valor/Parcela</th>
                            <th>Pagas</th>
                            <th>Restantes</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-parcelamentos-body">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Mensagem Sem Dados -->
        <div id="sem-dados-mensagem" class="sem-dados hidden">
            <div class="sem-dados-icon">
                <i class="fas fa-search"></i>
            </div>
            <h4>Nenhum dado encontrado</h4>
            <p>Não foram encontradas transações para os filtros selecionados. Tente ajustar os critérios de busca.</p>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="relatorios-loading" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
    </div>
</section>


<!-- ================================================== -->
<!-- SEÇÃO DE CONFIGURAÇÕES -->
<!-- ================================================== -->
<section class="config-section" id="config-section">
       
    <div class="config-tabs">
        <button class="config-tab-btn active" data-tab="categorias">
            <i class="fas fa-tags"></i> Gerenciar Categorias
        </button>
         <button class="config-tab-btn" data-tab="cartoes">
            <i class="fas fa-credit-card"></i> Cartões de Crédito
        </button>
        <button class="config-tab-btn" data-tab="usuarios">
            <i class="fas fa-users"></i> Usuários
        </button>
        <button class="config-tab-btn" data-tab="logs">
            <i class="fas fa-history"></i> Logs do Sistema
        </button>
        <button class="config-tab-btn" data-tab="sistema">
            <i class="fas fa-cogs"></i> Sistema
        </button>
    </div>
    
    <div class="config-tab-content">

        <!-- ============================================== -->
        <!-- ABA: GERENCIAMENTO DE CATEGORIAS -->
        <!-- ============================================== -->
        <div id="categorias-tab" class="config-tab-pane active">
            <div class="config-card">
                
                <div class="form-add-categoria">
                    <input type="text" id="nova-categoria-nome" placeholder="Nome da categoria" maxlength="50">
                    <button id="btn-adicionar-categoria" class="btn-action">
                        <i class="fas fa-plus"></i> Adicionar
                    </button>
                </div>
                
                <div class="categorias-grid">
                    <div class="grid-header" id="categorias-grid-header">
                        <div class="col-id">
                            ID
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-nome">
                            Nome da Categoria
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-data-criacao">
                            Data de Criação
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-data-edicao">
                            Última Edição
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-acoes">
                            Ações
                            <div class="column-resizer"></div>
                        </div>
                    </div>
                    <div class="grid-content" id="lista-categorias">
                        <!-- Categorias serão inseridas aqui -->
                    </div>
                </div>

                <!-- Mensagem quando não há categorias -->
                <div id="sem-categorias-message" class="notification-empty hidden">
                    <i class="fas fa-tags"></i>
                    <p>Nenhuma categoria encontrada</p>
                </div>
            </div>
            
            <div class="config-card info-card">
                <h3><i class="fas fa-info-circle"></i> Dicas</h3>
                <ul>
                    <li>Use categorias específicas para melhor organizar suas finanças</li>
                    <li>Você pode identificar a <strong>forma de pagamento</strong> (PIX, Débito, Crédito) diretamente no formulário de despesas</li>
                    <li>Todas as despesas da mesma categoria são agrupadas nos gráficos, independente da forma de pagamento</li>
                    <li>Categorias bem definidas melhoram a visualização nos relatórios</li>
                    <li>Você pode analisar seus gastos tanto por categoria quanto por forma de pagamento</li>
                </ul>
            </div>
        </div>
        
        <!-- ============================================== -->
        <!-- ABA: CONFIGURAÇÕES DO SISTEMA -->
        <!-- ============================================== -->
        <div id="sistema-tab" class="config-tab-pane">
            <div class="config-card">
                               
                <div class="form-group">
                    <h4><i class="fas fa-download"></i> Backup e Restauração</h4>
                    <div class="btn-group">
                        <button id="btn-exportar-dados" class="btn-action">
                            <i class="fas fa-download"></i> Exportar Todos os Dados
                        </button>
                        <button id="btn-exportar-mes-a-mes" class="btn-action">
                            <i class="fas fa-calendar-alt"></i> Exportar Mês a Mês
                        </button>
                        <button id="btn-importar-dados" class="btn-action">
                            <i class="fas fa-upload"></i> Importar Dados
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <h4><i class="fas fa-trash-alt"></i> Limpeza de Dados</h4>
                    <button id="btn-limpar-dados" class="btn-danger">
                        <i class="fas fa-trash"></i> Limpar Todos os Dados
                    </button>
                    <p class="texto-alerta">⚠️ Atenção: Esta ação é irreversível!</p>
                </div>
            </div>
            

            <!-- Status de operações do sistema -->
            <div id="sistema-status" class="config-card hidden">
                <h3><i class="fas fa-info-circle"></i> Status da Operação</h3>
                <div class="status-container">
                    <div id="status-message" class="status-message"></div>
                    <div id="status-progress" class="status-progress hidden">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ============================================== -->
        <!-- ABA: GERENCIAMENTO DE USUÁRIOS INTEGRADA -->
        <!-- ============================================== -->
        <div id="usuarios-tab" class="config-tab-pane">
            <div class="config-card">
               
                <!-- Controles de Usuários Integrados -->
                <div class="user-management-controls">
                    <div class="search-container">
                        <input type="text" id="usuario-search" placeholder="Buscar usuário..." maxlength="100">
                        <button id="btn-search-user" class="btn-search">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    
                    <div class="filter-container">
                        <select id="filter-user-type" class="filter-select">
                            <option value="todos">Todos os usuários</option>
                            <option value="master">Master</option>
                            <option value="admin">Administradores</option>
                            <option value="padrao">Usuários padrão</option>
                        </select>
                    </div>
                    
                    <button id="btn-adicionar-usuario" class="btn-action">
                        <i class="fas fa-user-plus"></i> Novo Usuário
                    </button>
                </div>

                <!-- Tabela de Usuários Integrada -->
                <div class="table-responsive">
                    <table class="tabela-usuarios">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Documento</th>
                                <th>E-mail</th>
                                <th>Tipo</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="lista-usuarios">
                            <!-- Preenchido dinamicamente via template -->
                        </tbody>
                    </table>
                </div>

                <!-- Mensagem quando não há usuários -->
                <div id="no-users-message" class="notification-empty hidden">
                    <i class="fas fa-users-slash"></i>
                    <p>Nenhum usuário encontrado</p>
                </div>

                <!-- Controles de Paginação -->
                <div class="pagination-controls">
                    <button id="btn-prev-page" class="btn-pagination" disabled>
                        <i class="fas fa-chevron-left"></i> Anterior
                    </button>
                    <span id="pagination-info">Página 1 de 1</span>
                    <button id="btn-next-page" class="btn-pagination" disabled>
                        Próxima <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- Card de Informações de Segurança -->
            <div class="config-card info-card">
                <h3><i class="fas fa-shield-alt"></i> Segurança</h3>
                <p>O gerenciamento de usuários permite controlar quem tem acesso ao sistema e quais ações cada usuário pode realizar.</p>
                <ul>
                    <li>Apenas usuários Master podem adicionar novos usuários</li>
                    <li>Usuários Master têm acesso total às configurações do sistema</li>
                    <li>Administradores só podem editar usuários do tipo Padrão</li>
                    <li>A exclusão de usuários também remove todos os seus dados</li>
                    <li>Cada usuário possui suas próprias categorias personalizadas</li>
                </ul>
            </div>
        </div>

       <div id="cartoes-tab" class="config-tab-pane">
    <div class="config-card">

        <div class="form-add-cartao">
            <input type="text" id="novo-cartao-banco" placeholder="Nome do Banco" maxlength="50">
            <input type="text" id="novo-cartao-validade" placeholder="MM/AAAA" maxlength="7">
            <input type="number" id="novo-cartao-limite" placeholder="Limite (R$)" step="0.01" min="0">
            <button id="btn-adicionar-cartao" class="btn-action">
                <i class="fas fa-plus"></i> Adicionar Cartão
            </button>
        </div>

        <div class="lista-cartoes-container">
            <table id="tabela-cartoes" class="tabela-cartoes">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Banco</th>
                        <th>Validade</th>
                        <th>Limite</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody id="lista-cartoes">
                    <!-- Cartões serão inseridos aqui dinamicamente -->
                </tbody>
            </table>
        </div>

        <div id="cartoes-status" class="status-feedback hidden">
            <div class="feedback-message">
                <i class="feedback-icon"></i>
                <span class="feedback-text"></span>
            </div>
        </div>
    </div>
    
    <div class="config-card info-card">
        <h3><i class="fas fa-info-circle"></i> Dicas sobre Cartões</h3>
        <ul>
            <li>Mantenha sempre o controle dos limites dos seus cartões</li>
            <li>Verifique regularmente as datas de validade</li>
            <li>Use o checkbox "Ativo" para cartões que você realmente utiliza</li>
        </ul>
    </div>
</div>

        <!-- ============================================== -->
        <!-- ABA: LOGS DO SISTEMA -->
        <!-- ============================================== -->
        <div id="logs-tab" class="config-tab-pane">
            <div class="config-card">
              
                <!-- Filtros -->
                <div class="logs-filtros">
                    <div class="filtro-grupo">
                        <label for="filtro-modulo">Módulo:</label>
                        <select id="filtro-modulo" class="form-select">
                            <option value="todos">Todos</option>
                            <option value="Receitas">Receitas</option>
                            <option value="Despesas">Despesas</option>
                            <option value="Configurações">Configurações</option>
                        </select>
                    </div>

                    <div class="filtro-grupo">
                        <label for="filtro-data-inicio">Data Início:</label>
                        <input type="date" id="filtro-data-inicio" class="form-input">
                    </div>

                    <div class="filtro-grupo">
                        <label for="filtro-data-fim">Data Fim:</label>
                        <input type="date" id="filtro-data-fim" class="form-input">
                    </div>

                    <div class="filtro-grupo">
                        <label for="filtro-acao">Ação:</label>
                        <select id="filtro-acao" class="form-select">
                            <option value="todos">Todas</option>
                            <option value="criado">Criado</option>
                            <option value="editado">Editado</option>
                            <option value="excluído">Excluído</option>
                        </select>
                    </div>

                    <div class="filtro-grupo">
                        <label for="filtro-busca">Buscar:</label>
                        <input type="text" id="filtro-busca" class="form-input" placeholder="Descrição, categoria...">
                    </div>

                    <div class="filtro-acoes">
                        <button id="btn-filtrar-logs" class="btn-action">
                            <i class="fas fa-filter"></i> Filtrar
                        </button>
                        <button id="btn-limpar-filtros-logs" class="btn-outline">
                            <i class="fas fa-eraser"></i> Limpar
                        </button>
                        <button id="btn-exportar-logs" class="btn-outline">
                            <i class="fas fa-download"></i> Exportar CSV
                        </button>
                        <button id="btn-limpar-todos-logs" class="btn-danger">
                            <i class="fas fa-trash"></i> Limpar Logs
                        </button>
                    </div>
                </div>

                <!-- Tabela de Logs -->
                <div class="lista-logs-container">
                    <table id="tabela-logs" class="tabela-logs">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Hora</th>
                                <th>Módulo</th>
                                <th>Ação</th>
                                <th>Usuário</th>
                                <th>Categoria</th>
                                <th>Descrição</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody id="lista-logs">
                            <!-- Preenchido dinamicamente -->
                        </tbody>
                    </table>
                </div>

                <!-- Mensagem quando não há logs -->
                <div id="sem-logs-message" class="empty-state hidden">
                    <i class="fas fa-inbox"></i>
                    <p>Nenhum log encontrado</p>
                    <small>As ações realizadas no sistema aparecerão aqui</small>
                </div>
            </div>
        </div>

    </div>
</section>



<!-- ================================================== -->
<!-- TODOS OS MODAIS DE CONFIGURAÇÕES -->
<!-- ================================================== -->

<!-- Modal: Editar Categoria -->
<div id="modal-editar-categoria" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-edit"></i> Editar Categoria</h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <form id="form-editar-categoria">
                <input type="hidden" id="categoria-edit-id">

                <div class="form-group">
                    <label for="categoria-edit-nome">
                        <i class="fas fa-tag"></i> Nome da Categoria: <span class="required">*</span>
                    </label>
                    <input type="text" id="categoria-edit-nome" class="form-input" required maxlength="50">
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-action">
                        <i class="fas fa-save"></i> Salvar Alterações
                    </button>
                    <button type="button" class="btn-outline" data-action="cancelar">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal: Editar Cartão -->
<div id="modal-editar-cartao" class="modal">
    <div class="modal-content modal-cartao-editar">
        <div class="modal-header">
            <h2><i class="fas fa-credit-card"></i> Editar Cartão</h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <form id="form-editar-cartao">
                <input type="hidden" id="cartao-edit-id">

                <div class="cartao-form-grid">
                    <div class="form-group form-group-full">
                        <label for="cartao-edit-banco">
                            <i class="fas fa-university"></i> Nome do Banco <span class="required">*</span>
                        </label>
                        <input type="text" id="cartao-edit-banco" class="form-input" required maxlength="50" placeholder="Ex: Banco do Brasil, Nubank, etc.">
                    </div>

                    <div class="form-group">
                        <label for="cartao-edit-validade">
                            <i class="fas fa-calendar-alt"></i> Validade <span class="required">*</span>
                        </label>
                        <input type="text" id="cartao-edit-validade" class="form-input" placeholder="MM/AAAA" required maxlength="7">
                    </div>

                    <div class="form-group">
                        <label for="cartao-edit-limite">
                            <i class="fas fa-dollar-sign"></i> Limite (R$) <span class="required">*</span>
                        </label>
                        <input type="number" id="cartao-edit-limite" class="form-input" step="0.01" min="0" required placeholder="0,00">
                    </div>

                    <div class="form-group form-group-full cartao-status-group">
                        <label class="checkbox-label-inline">
                            <input type="checkbox" id="cartao-edit-ativo">
                            <span><i class="fas fa-check-circle"></i> Cartão Ativo</span>
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-action btn-primary">
                        <i class="fas fa-save"></i> Salvar Alterações
                    </button>
                    <button type="button" class="btn-outline btn-secondary" data-action="cancelar">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal: Adicionar Usuário -->
<div id="modal-adicionar-usuario" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-user-plus"></i> Adicionar Novo Usuário</h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <form id="form-adicionar-usuario">
                <div class="form-group">
                    <label for="novo-usuario-nome">
                        <i class="fas fa-user"></i> Nome: <span class="required">*</span>
                    </label>
                    <input type="text" id="novo-usuario-nome" class="form-input" required maxlength="100">
                </div>
                
                <div class="form-group">
                    <label for="novo-usuario-email">
                        <i class="fas fa-envelope"></i> E-mail: <span class="required">*</span>
                    </label>
                    <input type="email" id="novo-usuario-email" class="form-input" required maxlength="100">
                </div>
                
                <div class="form-group">
                    <label for="novo-usuario-documento">
                        <i class="fas fa-id-card"></i> Documento (CPF/CNPJ): <span class="required">*</span>
                    </label>
                    <input type="text" id="novo-usuario-documento" class="form-input" required maxlength="18">
                    <small class="field-help">Digite apenas números</small>
                </div>
                
                <div class="form-group">
                    <label for="novo-usuario-tipo">
                        <i class="fas fa-user-tag"></i> Tipo de Usuário:
                    </label>
                    <select id="novo-usuario-tipo" class="form-select">
                        <option value="padrao">Usuário Padrão</option>
                        <option value="admin">Administrador</option>
                        <option value="master">Master</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="novo-usuario-senha">
                        <i class="fas fa-key"></i> Senha: <span class="required">*</span>
                    </label>
                    <input type="password" id="novo-usuario-senha" class="form-input" required minlength="6">
                    <small class="field-help">Mínimo 6 caracteres</small>
                </div>
                
                <div class="form-group">
                    <label for="novo-usuario-confirmar-senha">
                        <i class="fas fa-key"></i> Confirmar Senha: <span class="required">*</span>
                    </label>
                    <input type="password" id="novo-usuario-confirmar-senha" class="form-input" required minlength="6">
                </div>

                <!-- Status de validação -->
                <div id="validacao-status" class="validation-feedback hidden">
                    <div class="validation-message">
                        <i class="validation-icon"></i>
                        <span class="validation-text"></span>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-action">
                        <i class="fas fa-user-plus"></i> Adicionar Usuário
                    </button>
                    <button type="button" class="btn-outline" data-action="cancelar">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal: Editar Usuário -->
<div id="modal-editar-usuario" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="editar-usuario-titulo">
                <i class="fas fa-user-edit"></i> Editar Usuário
            </h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <form id="form-editar-usuario">
                <input type="hidden" id="editar-usuario-id">
                
                <div class="form-group">
                    <label for="editar-usuario-nome">
                        <i class="fas fa-user"></i> Nome: <span class="required">*</span>
                    </label>
                    <input type="text" id="editar-usuario-nome" class="form-input" required maxlength="100">
                </div>
                
                <div class="form-group">
                    <label for="editar-usuario-email">
                        <i class="fas fa-envelope"></i> E-mail: <span class="required">*</span>
                    </label>
                    <input type="email" id="editar-usuario-email" class="form-input" required maxlength="100">
                </div>
                
                <div class="form-group">
                    <label for="editar-usuario-documento">
                        <i class="fas fa-id-card"></i> Documento (CPF/CNPJ): <span class="required">*</span>
                    </label>
                    <input type="text" id="editar-usuario-documento" class="form-input" required maxlength="18" disabled>
                    <small class="field-help">O documento não pode ser alterado após o cadastro</small>
                </div>
                
                <div id="form-group-tipo" class="form-group">
                    <label for="editar-usuario-tipo">
                        <i class="fas fa-user-tag"></i> Tipo de Usuário:
                    </label>
                    <select id="editar-usuario-tipo" class="form-select">
                        <option value="padrao">Usuário Padrão</option>
                        <option value="admin">Administrador</option>
                        <option value="master">Master</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editar-usuario-status">
                        <i class="fas fa-toggle-on"></i> Status:
                    </label>
                    <select id="editar-usuario-status" class="form-select">
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                        <option value="bloqueado">Bloqueado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editar-usuario-senha">
                        <i class="fas fa-key"></i> Nova Senha:
                    </label>
                    <input type="password" id="editar-usuario-senha" class="form-input" placeholder="Deixe em branco para manter a atual" minlength="6">
                    <small class="field-help">Mínimo 6 caracteres</small>
                </div>
                
                <div class="form-group">
                    <label for="editar-usuario-confirmar-senha">
                        <i class="fas fa-key"></i> Confirmar Nova Senha:
                    </label>
                    <input type="password" id="editar-usuario-confirmar-senha" class="form-input" placeholder="Confirme a nova senha">
                </div>

                <!-- Mensagem de permissão -->
                <div id="permissao-message" class="alert-message hidden">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Você só pode editar usuários do tipo Padrão</span>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-action">
                        <i class="fas fa-save"></i> Salvar Alterações
                    </button>
                    <button type="button" class="btn-outline" data-action="cancelar">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal: Confirmação de Exclusão de Usuário -->
<div id="modal-confirmar-exclusao-usuario" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h3><i class="fas fa-exclamation-triangle"></i> Confirmar Exclusão</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <div class="confirmacao-exclusao">
                <div class="warning-message">
                    <i class="fas fa-user-times"></i>
                    <p>Tem certeza que deseja excluir o usuário <strong id="usuario-nome-exclusao"></strong>?</p>
                </div>
                
                <div class="alert-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p><strong>ATENÇÃO:</strong> Todos os dados deste usuário serão perdidos permanentemente. Esta ação não pode ser desfeita.</p>
                </div>
            </div>
            
            <div class="form-actions">
                <button id="btn-confirmar-exclusao-usuario" class="btn-danger">
                    <i class="fas fa-trash"></i> Sim, Excluir
                </button>
                <button id="btn-cancelar-exclusao-usuario" class="btn-outline">
                    <i class="fas fa-times"></i> Cancelar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Feedback do Sistema -->
<div id="modal-feedback-sistema" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h3 id="feedback-titulo">Mensagem do Sistema</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <div id="feedback-conteudo" class="feedback-message">
                <div id="feedback-icone" class="feedback-icon"></div>
                <p id="feedback-texto">Mensagem</p>
            </div>
            <div class="form-actions">
                <button id="btn-feedback-ok" class="btn-action btn-block">OK</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Alterar Senha -->
<div id="modal-alterar-senha" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header"></i> Alterar Senha</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <form id="form-alterar-senha">
                <div class="form-group">
                    <label for="senha-atual-modal">Senha Atual</label>
                    <input type="password" id="senha-atual-modal" class="form-control" placeholder="Digite sua senha atual" required>
                </div>

                <div class="form-group">
                    <label for="senha-nova-modal">Nova Senha</label>
                    <input type="password" id="senha-nova-modal" class="form-control" placeholder="Digite a nova senha" required minlength="6">
                </div>

                <div class="form-group">
                    <label for="senha-confirmar-modal">Confirmar Nova Senha</label>
                    <input type="password" id="senha-confirmar-modal" class="form-control" placeholder="Digite novamente a nova senha" required minlength="6">
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-action"></i> Alterar Senha
                    </button>
                    <button type="button" class="btn-action-secondary close">Cancelar</button>
                </div>
            </form>           
        </div>
    </div>
</div>

<!-- ================================================== -->
<!-- TEMPLATES PARA REUTILIZAÇÃO -->
<!-- ================================================== -->

<!-- Template: Linha de Categoria -->
<template id="template-linha-categoria">
    <div class="grid-row categoria-row">
        <div class="col-id"></div>
        <div class="col-nome"></div>
        <div class="col-data-criacao"></div>
        <div class="col-data-edicao"></div>
        <div class="col-acoes"></div>
    </div>
</template>

<!-- Template: Botões de Ação para Categoria -->
<template id="template-botoes-acao-categoria">
    <div class="acoes-grupo">
        <button class="btn btn-sm btn-editar-categoria" data-categoria-id="" title="Editar">
            <i class="fas fa-edit"></i>
        </button>
        <button class="btn btn-sm btn-remover-categoria" data-categoria-id="" title="Excluir">
            <i class="fas fa-trash"></i>
        </button>
    </div>
</template>

<!-- Template: Linha de Usuário -->
<template id="template-linha-usuario">
    <tr class="usuario-row">
        <td class="usuario-nome"></td>
        <td class="usuario-documento"></td>
        <td class="usuario-email"></td>
        <td class="usuario-tipo">
            <span class="tipo-badge"></span>
        </td>
        <td class="usuario-status">
            <span class="status-badge"></span>
        </td>
        <td class="acoes-usuario">
            <button class="btn-usuario btn-editar-usuario" data-index="" title="Editar usuário">
                <i class="fas fa-edit"></i>
            </button>
            <button class="btn-usuario btn-bloquear-usuario" data-index="" title="Bloquear usuário">
                <i class="fas fa-ban"></i>
            </button>
            <button class="btn-usuario btn-excluir-usuario" data-index="" title="Excluir usuário">
                <i class="fas fa-trash"></i>
            </button>
            <span class="texto-sem-permissao hidden">Sem permissão</span>
        </td>
    </tr>
</template>

<!-- Template: Badge de Tipo de Usuário -->
<template id="template-tipo-badge">
    <span class="tipo-badge tipo-padrao">Padrão</span>
</template>

<!-- Template: Badge de Status de Usuário -->
<template id="template-status-badge">
    <span class="status-badge status-ativo">Ativo</span>
</template>

<!-- Template: Mensagem de Status -->
<template id="template-status-message">
    <div class="status-message">
        <i class="status-icon"></i>
        <span class="status-text"></span>
    </div>
</template>

<!-- Template: Mensagem de Validação -->
<template id="template-validation-message">
    <div class="validation-message">
        <i class="validation-icon"></i>
        <span class="validation-text"></span>
    </div>
</template>

<!-- ======================================================== -->
<!-- TELA DE BLOQUEIO -->
<!-- ======================================================== -->
<div id="lock-screen-overlay" class="lock-screen-overlay"></div>
<div id="modal-lock-screen" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-lock"></i> Sistema Bloqueado</h2>
        </div>
        <div class="modal-body">
            <form id="form-lock-screen">
                <div class="form-group">
                    <input type="password" id="lock-screen-password" placeholder="Sua Senha" required>
                </div>
                <button type="submit" class="btn-submit btn-full-width">Desbloquear</button>
            </form>
        </div>
    </div>
</div>

<!-- ======================================================== -->
<!-- MODAL: CRIAÇÃO DE ANO FINANCEIRO -->
<!-- ======================================================== -->
<div id="modal-novo-ano" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Criar Novo Ano Financeiro</h2>
            <span class="close" data-modal="modal-novo-ano">&times;</span>
        </div>
        <div class="modal-body">
            <form id="form-novo-ano" onsubmit="handleCriarNovoAno(event)">
                <div class="form-group">
                    <label for="ano">Ano:</label>
                    <input type="number" id="ano" min="2000" max="2100" required>
                </div>
                <div class="form-group">
                    <label for="receita-mensal">Receita Mensal Padrão:</label>
                    <input type="number" id="receita-mensal" min="0" step="0.01" placeholder="0.00">
                </div>
                <button type="submit" class="btn-submit">Criar</button>
            </form>
        </div>
    </div>
</div>


<!-- ======================================================== -->
<!-- MODAL: FECHAMENTO AUTOMÁTICO -->
<!-- Notifica quando um mês é fechado automaticamente -->
<!-- ======================================================== -->
<div id="modal-notificacao-fechamento" class="notificacao-fechamento hidden">
    <div class="notificacao-content">
        <div class="notificacao-icon">🔒</div>
        <div class="notificacao-texto">
            <strong id="notificacao-titulo">Mês fechado automaticamente</strong>
            <small id="notificacao-saldo">Saldo transferido: R$ 0,00</small>
        </div>
        <button class="notificacao-close">&times;</button>
    </div>
</div>

<!-- ======================================================== -->
<!-- MODAL: DETALHES MENSAIS -->
<!-- ======================================================== -->
<div id="modal-detalhes-mes" class="modal">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2 id="detalhes-mes-titulo">Detalhes do Mês</h2>
            <div class="header-navigation">
                <button id="btn-mes-anterior" class="btn-navegacao-mes">Anterior</button>
                <button id="btn-mes-proximo" class="btn-navegacao-mes">Próximo</button>
            </div>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
           <div class="tabs">
                <button class="tab-btn active" data-tab="tab-resumo">Resumo</button>
                <button class="tab-btn" data-tab="tab-despesas">Despesas</button>
                <button class="tab-btn" data-tab="tab-receitas">Receitas</button>
            </div>

            <!-- ABA RESUMO -->
            <div id="tab-resumo" class="tab-content active">
                <div class="resumo-cards">
                    <div class="card card-receitas">
                        <div class="card-icon">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <div class="card-content">
                            <h3>RECEITAS TOTAIS</h3>
                            <p id="resumo-receitas" class="card-valor">R$ 0,00</p>
                            <span class="card-subtitle">Total de receitas do mês</span>
                        </div>
                    </div>
                    <div class="card card-despesas">
                        <div class="card-icon">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                        <div class="card-content">
                            <h3>DESPESAS TOTAIS</h3>
                            <p id="resumo-despesas" class="card-valor">R$ 0,00</p>
                            <span class="card-subtitle">Total de despesas do mês</span>
                        </div>
                    </div>
                    <div class="card card-saldo">
                        <div class="card-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="card-content">
                            <h3>SALDO MENSAL</h3>
                            <p id="resumo-saldo" class="card-valor">R$ 0,00</p>
                            <span class="card-subtitle">Balanço receitas - despesas</span>
                        </div>
                    </div>
                    <div class="card card-juros">
                        <div class="card-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="card-content">
                            <h3>JUROS PAGOS</h3>
                            <p id="resumo-juros" class="card-valor">R$ 0,00</p>
                            <span class="card-subtitle">Total de juros pagos no mês</span>
                        </div>
                    </div>
                    <div class="card card-economias">
                        <div class="card-icon">
                            <i class="fas fa-piggy-bank"></i>
                        </div>
                        <div class="card-content">
                            <h3>ECONOMIAS</h3>
                            <p id="resumo-economias" class="card-valor">R$ 0,00</p>
                            <span class="card-subtitle">Valor economizado no mês</span>
                        </div>
                    </div>
                </div>
                
                <!-- Barras de Limite dos Cartões -->
                <div id="limites-cartoes-container" class="limites-cartoes-container">
                    <h3><i class="fas fa-credit-card"></i> Limites dos Cartões</h3>

                    <div id="lista-barras-cartoes" class="lista-barras-cartoes">
                        <!-- Cartões serão inseridos dinamicamente aqui -->
                    </div>
                </div>
            </div>

            <!-- ABA RECEITAS -->
            <div id="tab-receitas" class="tab-content">
                <!-- BARRA DE AÇÕES COM RESERVAS -->
                <div class="tab-actions-with-reservas">
                    <button id="btn-nova-receita" class="btn-action">
                        <i class="fas fa-plus-circle"></i> Nova Receita
                    </button>

                    <div class="reservas-inline">
                        <div class="reservas-info">
                            <i class="fas fa-piggy-bank"></i>
                            <span class="reservas-label">Disponível:</span>
                            <span id="reservas-disponivel-mini" class="reservas-valor">R$ 0,00</span>
                            <span class="reservas-separator">|</span>
                            <span class="reservas-label">Reservado:</span>
                            <span id="reservas-reservado-mini" class="reservas-valor">R$ 0,00</span>
                        </div>
                        <button id="btn-reservar-valor" class="btn-reservar-inline">
                            <i class="fas fa-piggy-bank"></i> Reservas
                        </button>
                    </div>
                </div>

                <!-- SALDO ANTERIOR (FORA DA TABELA) -->
                <div id="saldo-anterior-info" class="saldo-anterior-info" style="display: none;">
                    <div class="saldo-anterior-content">
                        <span class="saldo-anterior-label">Saldo Anterior:</span>
                        <span id="saldo-anterior-valor" class="saldo-anterior-valor">R$ 0,00</span>
                    </div>
                </div>

                <div class="receitas-grid">
                    <div class="grid-header" id="receitas-grid-header">
                        <div class="col-id">
                            ID
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-descricao">
                            Descrição
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-valor">
                            Valor
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-data">
                            Data
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-parcela">
                            Parcela
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-acoes">
                            Ações
                            <div class="column-resizer"></div>
                        </div>
                        <div class="col-anexos">
                            Anexos
                            <div class="column-resizer"></div>
                        </div>
                    </div>
                    <div class="grid-content" id="lista-receitas">
                        <!-- Receitas serão inseridas aqui -->
                    </div>
                </div>
            </div>

            <!-- ABA DESPESAS -->
            <div id="tab-despesas" class="tab-content">
                <!-- Conteúdo gerado dinamicamente pelo despesas.js -->
            </div>

        </div>
    </div>
</div>

<!-- ================================================================ -->
<!-- TEMPLATES PARA RECEITAS  -->
<!-- ================================================================ -->

<template id="template-linha-receita">
    <div class="grid-row receita-row" data-categoria="">
        <div class="col-id">
            <span class="receita-id"></span>
        </div>
        <div class="col-descricao">
            <span class="receita-descricao"></span>
        </div>
        <div class="col-valor">
            <span class="receita-valor"></span>
        </div>
        <div class="col-data">
            <span class="receita-data"></span>
        </div>
        <div class="col-parcela">
            <span class="receita-parcela"></span>
        </div>
        <div class="col-acoes">
            <button class="btn btn-editar" data-index="" title="Editar">
                <i class="fas fa-edit"></i>
            </button>
            <button class="btn btn-excluir" data-index="" title="Excluir">
                <i class="fas fa-trash"></i>
            </button>
        </div>
        <div class="col-anexos">
            <button class="btn btn-anexos" data-index="" title="Ver anexos">
                <i class="fas fa-paperclip"></i>
                <span class="contador-anexos">0</span>
            </button>
        </div>
    </div>
</template>

<template id="template-linha-saldo-anterior">
    <div class="grid-row saldo-anterior-row">
        <div class="col-descricao">
            <span class="saldo-anterior-desc"></span>
        </div>
        <div class="col-valor">
            <span class="saldo-anterior-valor"></span>
        </div>
        <div class="col-data">-</div>
        <div class="col-parcela">-</div>
        <div class="col-acoes">
            <span class="badge-saldo-anterior">AUTOMÁTICO</span>
        </div>
        <div class="col-anexos">-</div>
    </div>
</template>

<template id="template-reserva-mini">
    <div class="reserva-mini-item">
        <div class="reserva-icon">
            <i class="fas fa-lock"></i>
        </div>
        <div class="reserva-info">
            <span class="reserva-descricao"></span>
            <span class="reserva-data-mini"></span>
        </div>
        <span class="reserva-valor-mini"></span>
        <button class="btn-remover-reserva-mini" title="Remover reserva">
            <i class="fas fa-times"></i>
        </button>
    </div>
</template>

        </div>
      </div>
    </div>


<!-- ======================================================== -->
<!-- TEMPLATES -->
<!-- ======================================================== -->

<!-- Template para linha de saldo anterior -->
<template id="template-linha-saldo-anterior">
    <div class="grid-row saldo-anterior-row">
        <div class="col-descricao">
            <span class="saldo-anterior-desc"></span>
        </div>
        <div class="col-valor">
            <span class="saldo-anterior-valor"></span>
        </div>
        <div class="col-data">-</div>
        <div class="col-parcela">-</div>
        <div class="col-acoes">
            <span class="badge-saldo-anterior">AUTOMÁTICO</span>
        </div>
        <div class="col-anexos">-</div>
    </div>
</template>

<!-- ======================================================== -->
<!-- MODAL: CADASTRO DE RECEITAS -->
<!-- ======================================================== -->
<div id="modal-nova-receita" class="modal modal-nova-receita">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Nova Receita</h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <form id="form-nova-receita">
                <input type="hidden" id="receita-id">
                <input type="hidden" id="receita-mes">
                <input type="hidden" id="receita-ano">
                
                <div class="form-group form-group-full">
                    <label for="receita-descricao">Descrição:</label>
                    <div class="descricao-anexos-container">
                        <input type="text" id="receita-descricao" placeholder="Descrição" required>
                        <button type="button" id="btn-anexar-receita" class="btn-anexar">
                            <i class="fas fa-paperclip"></i> Anexar
                        </button>
                    </div>
                </div>
                
                <div id="lista-anexos-receita" class="lista-anexos-container">
                    <!-- Anexos serão inseridos aqui -->
                </div>
                
                <div class="form-row-grid">
                    <div class="form-group campo-valor">
                        <label for="receita-valor">Valor:</label>
                        <input type="number" id="receita-valor" min="0.01" step="0.01" placeholder="0,00" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="receita-data">Data:</label>
                        <input type="date" id="receita-data" required>
                    </div>
                </div>
                
                <div id="opcoes-parcelamento-receita" class="hidden">
                    <div class="form-group">
                        <label for="receita-parcelas">Número de Parcelas:</label>
                        <input type="number" id="receita-parcelas" min="2" max="36" value="2" placeholder="Número de Parcelas">
                    </div>
                </div>
                
                <div class="checkbox-container">
                    <div class="checkbox-row">
                        <input type="checkbox" id="receita-replicar">
                        <label for="receita-replicar">Replicar para meses futuros</label>
                    </div>
                </div>
                
                <div id="opcoes-replicacao-detalhes" class="hidden">
                    <div class="opcoes-replicacao-grupo">
                        <div class="opcao-replicacao">
                            <input type="radio" name="tipo-replicacao" id="replicar-todos" value="todos" checked />
                            <label for="replicar-todos">Replicar para todos os meses futuros</label>
                        </div>
                        
                        <div class="opcao-replicacao">
                            <input type="radio" name="tipo-replicacao" id="replicar-ate" value="ate" />
                            <label for="replicar-ate">Replicar até</label>
                            
                            <div id="selector-ate-container" class="hidden">
                                <div class="select-grupo">
                                    <select id="replicar-ate-mes">
                                        <option value="0">Janeiro</option>
                                        <option value="1">Fevereiro</option>
                                        <option value="2">Março</option>
                                        <option value="3">Abril</option>
                                        <option value="4">Maio</option>
                                        <option value="5">Junho</option>
                                        <option value="6">Julho</option>
                                        <option value="7">Agosto</option>
                                        <option value="8">Setembro</option>
                                        <option value="9">Outubro</option>
                                        <option value="10">Novembro</option>
                                        <option value="11">Dezembro</option>
                                    </select>
                                    <select id="replicar-ate-ano"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn-salvar-transacao">Salvar</button>
            </form>
        </div>
    </div>
</div>

<!-- ======================================================== -->
<!-- MODAL: EXCLUSÃO DE RECEITAS -->
<!-- ======================================================== -->
<div id="modal-exclusao-receita" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h3>Excluir receita</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <p>Como deseja excluir esta receita?</p>
            <div class="opcoes-exclusao">
                <button id="btn-excluir-atual" class="btn btn-block">Excluir apenas esta receita</button>
                <button id="btn-excluir-todas" class="btn btn-block">Excluir todas com esta descrição neste ano</button>
            </div>
        </div>
    </div>
</div>

<!-- ======================================================== -->
<!-- MODAIS DE ANEXOS -->
<!-- ======================================================== -->

<!-- Modal: Visualizar anexos da receita -->
<div id="modal-anexos-receita" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Anexos da Receita</h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <div id="lista-anexos-visualizar" class="lista-anexos-visualizar">
                <!-- Anexos para download serão inseridos aqui -->
            </div>
        </div>
    </div>
</div>

<!-- Modal Reservas -->
<div id="modal-reservar-valor" class="modal">
    <div class="modal-content modal-reservar-compact">
        <div class="modal-header">
            <h2><i class="fas fa-piggy-bank"></i> Gerenciar Reservas</h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="input-valor-reserva">Valor</label>
                <input
                    type="number"
                    id="input-valor-reserva"
                    class="form-control"
                    placeholder="0,00"
                    step="0.01"
                    min="0.01"
                    required
                >
                <small class="form-hint">
                    <i class="fas fa-info-circle"></i>
                    Disponível: <span id="modal-disponivel-reserva">R$ 0,00</span> |
                    Reservado: <span id="modal-reservado-reserva">R$ 0,00</span>
                </small>
            </div>

            <div class="form-group">
                <label for="input-descricao-reserva">Descrição (opcional)</label>
                <input
                    type="text"
                    id="input-descricao-reserva"
                    class="form-control"
                    placeholder="Ex: Viagem, Emergência..."
                    maxlength="50"
                >
            </div>

            <div class="modal-footer">
                <button type="button" id="btn-adicionar-reserva" class="btn-confirmar-modal">
                    <i class="fas fa-plus-circle"></i> Adicionar
                </button>
                <button type="button" id="btn-retirar-reserva" class="btn-confirmar-modal btn-retirar">
                    <i class="fas fa-minus-circle"></i> Retirar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Templates para anexos -->
<template id="template-anexo-item">
    <div class="anexo-item">
        <div class="anexo-info">
            <i class="anexo-icone"></i>
            <span class="anexo-nome"></span>
        </div>
        <button class="btn-remover-anexo" data-anexo-id="">
            <i class="fas fa-times"></i>
        </button>
    </div>
</template>

<template id="template-anexo-download">
    <div class="anexo-download-item">
        <div class="anexo-info">
            <i class="anexo-icone"></i>
            <span class="anexo-nome"></span>
        </div>
        <button class="btn-download-anexo" data-anexo-id="">
            <i class="fas fa-download"></i>
        </button>
    </div>
</template>





<div id="modal-nova-despesa" class="modal modal-nova-despesa">
   <div class="modal-content modal-despesa-compact">
       <div class="modal-header">
           <h2>Nova Despesa</h2>
           <span class="close" data-modal="modal-nova-despesa">&times;</span>
       </div>
       <div class="modal-body">
           <form id="form-nova-despesa" onsubmit="handleSalvarDespesa(event)">
               <input type="hidden" id="despesa-id">
               <input type="hidden" id="despesa-mes">
               <input type="hidden" id="despesa-ano">
               
              <!-- Descrição e Anexos -->
                <div class="form-group-compact">
                    <div class="descricao-anexos-row">
                        <input type="text" id="despesa-descricao" placeholder="Descrição da despesa" required>
                        <button type="button" id="btn-anexar-despesa" class="btn-anexar-compact">
                            <i class="fas fa-paperclip"></i>
                        </button>
                    </div>
                    <div id="lista-anexos-despesa" class="lista-anexos-inline"></div>
                </div>
               
               <!-- Categoria e Forma de Pagamento -->
               <div class="form-row-compact">
                   <div class="form-col">
                       <label>Categoria *</label>
                       <select id="despesa-categoria" required onchange="validarCategoria()">
                           <option value="">Selecione...</option>
                           <!-- Categorias serão inseridas dinamicamente aqui pela função atualizarDropdowns() -->
                           </select>
                   </div>
                   
                   <div class="form-col">
                        <label>Pagamento *</label>
                        <div class="payment-methods">
                            <div class="payment-option">
                                <input type="radio" id="pagamento-pix" name="forma-pagamento" value="pix" required onchange="validarFormaPagamento()">
                                <label for="pagamento-pix">PIX</label>
                            </div>
                            <div class="payment-option">
                                <input type="radio" id="pagamento-debito" name="forma-pagamento" value="debito" required onchange="validarFormaPagamento()">
                                <label for="pagamento-debito">DEBITO</label>
                            </div>
                            <div class="payment-option-group" id="credito-options">
                                <!-- Cartões serão inseridos dinamicamente aqui pela função atualizarOpcoesCartoes() -->
                            </div>
                        </div>
                    </div>
               </div>
               
               <!-- Valores e Parcelas -->
               <div class="form-row-compact form-row-valores">
                   <div class="form-col">
                       <label>Valor original *</label>
                       <input type="number" id="despesa-valor" min="0.01" step="0.01" placeholder="0,00" required onchange="calcularInfoParcelamento()">
                   </div>
                   <div class="form-col">
                       <label>Com juros</label>
                       <input type="number" id="despesa-valor-pago" min="0" step="0.01" placeholder="0,00" onchange="calcularInfoParcelamento()">
                   </div>
                   <div class="form-col parcelas-col">
                       <label>
                           <input type="checkbox" id="despesa-parcelado" onchange="toggleParcelamentoDespesa(this)">Parcelas</label>
                       <input type="number" id="despesa-parcelas" min="2" max="999" value="2" disabled onchange="calcularInfoParcelamento()">
                   </div>
               </div>

               <!-- Datas -->
               <div class="form-row-compact">
                   <div class="form-col">
                       <label>Compra *</label>
                       <input type="date" id="despesa-data-compra" required>
                   </div>
                   <div class="form-col">
                       <label>Vencimento *</label>
                       <input type="date" id="despesa-data-vencimento" required>
                   </div>
               </div>
               
               <!-- Info de Parcelamento -->
               <div id="info-parcelamento" class="info-compact hidden">
                   <div class="info-grid">
                       <span>Juros total: <strong id="info-juros-total">R$ 0,00</strong></span>
                       <span>Por parcela: <strong id="info-juros-parcela">R$ 0,00</strong></span>
                       <span>Valor parcela: <strong id="info-valor-parcela">R$ 0,00</strong></span>
                       <span>Total: <strong id="info-valor-total">R$ 0,00</strong></span>
                   </div>
               </div>
               
               <!-- Checkboxes e Botão -->
               <div class="form-footer-compact">
                    <div class="checkboxes-inline">
                        <label class="checkbox-inline">
                            <input type="checkbox" id="despesa-ja-pago">
                            Já está Paga
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" id="despesa-recorrente">
                            Recorrente
                        </label>
                    </div>
                    <button type="submit" class="btn-salvar-compact">
                        Salvar Despesa
                    </button>
                </div>
           </form>
       </div>
   </div>
</div>



<template id="template-estrutura-despesas-grid">
    <div class="tab-actions">
        <div class="left-side">
            <button id="btn-nova-despesa" class="btn-action">
                <i class="fas fa-plus-circle"></i> Nova Despesa
            </button>
            <button id="btn-pagar-em-lote" class="btn-action" disabled>
                <i class="fas fa-check-circle"></i> Pagar em Lote
            </button>
        </div>
        
        <div class="right-side">
            <div class="filtros-despesas">
                <select id="filtro-categoria" class="form-control">
                    <option value="todas">Categorias</option>
                </select>
                <select id="filtro-forma-pagamento-tabela" class="form-control">
                    <option value="todas">Forma Pagamento</option>
                    <option value="pix">PIX</option>
                    <option value="debito">Débito</option>
                    <option value="credito">Crédito</option>
                </select>
                <select id="filtro-status" class="form-control">
                    <option value="todas">Status</option>
                    <option value="em_dia">Em Dia</option>
                    <option value="atrasada">Atrasadas</option>
                    <option value="pagas">Pagas</option>
                    <option value="pendentes">Pendentes</option>
                </select>
                <select id="filtro-ordenacao-despesas" class="form-control">
                    <option value="original">Ordem Original</option>
                    <option value="data-compra-asc">Data Compra (A-Z)</option>
                    <option value="data-compra-desc">Data Compra (Z-A)</option>
                    <option value="data-vencimento-asc">Vencimento (A-Z)</option>
                    <option value="data-vencimento-desc">Vencimento (Z-A)</option>
                    <option value="valor-asc">Menor Valor</option>
                    <option value="valor-desc">Maior Valor</option>
                </select>
                <button id="btn-limpar-filtros" class="btn btn-secondary">
                    <i class="fas fa-eraser"></i>
                </button>
                <span id="contador-filtro" class="filtro-contador"></span>
            </div>
        </div>
    </div>
    
    <div id="despesas-grid-container" class="despesas-grid">
        <div class="grid-header" id="despesas-grid-header">
            <div class="col-checkbox">
                <input type="checkbox" id="select-all-despesas" onchange="toggleTodasDespesas(this)">
                <div class="column-resizer"></div>
            </div>
            <div class="col-numero">
                ID
                <div class="column-resizer"></div>
            </div>
            <div class="col-descricao">
                Descrição
                <div class="column-resizer"></div>
            </div>
            <div class="col-categoria">
                Categoria
                <div class="column-resizer"></div>
            </div>
            <div class="col-forma-pagamento">
                Método
                <div class="column-resizer"></div>
            </div>
            <div class="col-valor">
                Valor
                <div class="column-resizer"></div>
            </div>
            <div class="col-parcela">
                Parcela
                <div class="column-resizer"></div>
            </div>
            <div class="col-valor-pago">
                Valor Pago
                <div class="column-resizer"></div>
            </div>
            <div class="col-status">
                Status
                <div class="column-resizer"></div>
            </div>
            <div class="col-compra">
                Compra
                <div class="column-resizer"></div>
            </div>
            <div class="col-vencimento">
                Vencimento
                <div class="column-resizer"></div>
            </div>
            <div class="col-data-pagamento">
                Pagamento
                <div class="column-resizer"></div>
            </div>
            <div class="col-acoes">
                Ações
                <div class="column-resizer"></div>
            </div>
            <div class="col-anexos">Anexos</div>
        </div>
        
        <div id="lista-despesas" class="grid-content">
            <!-- Linhas serão inseridas aqui -->
        </div>
    </div>
</template>

<template id="template-linha-despesa-grid">
    <div class="grid-row despesa-row">
        <div class="col-checkbox"></div>
        <div class="col-numero"></div>
        <div class="col-descricao"></div>
        <div class="col-categoria"></div>
        <div class="col-forma-pagamento"></div>
        <div class="col-valor"></div>
        <div class="col-parcela"></div>
        <div class="col-valor-pago"></div>
        <div class="col-status"></div>
        <div class="col-compra"></div>
        <div class="col-vencimento"></div>
        <div class="col-data-pagamento"></div>
        <div class="col-acoes"></div>
        <div class="col-anexos">
            <button class="btn btn-anexos" data-index="" title="Ver anexos">
                <i class="fas fa-paperclip"></i>
                <span class="contador-anexos">0</span>
            </button>
        </div>
    </div>
</template>

<template id="template-botoes-acao-despesa">
    <div class="acoes-grupo">
        <button class="btn btn-sm btn-editar" title="Editar">
            <i class="fas fa-edit"></i>
        </button>
        <button class="btn btn-sm btn-excluir" title="Excluir">
            <i class="fas fa-trash"></i>
        </button>
        <button class="btn btn-sm btn-pagar" title="Pagar">
            <i class="fas fa-check"></i>
        </button>
        <button class="btn btn-sm btn-mover" title="Mover para próximo mês">
            <i class="fas fa-arrow-right"></i>
        </button>
    </div>
</template>

<template id="template-valor-com-juros">
    <div class="valor-com-juros">
        <span class="valor-original"></span>
        <span class="valor-juros"></span>
    </div>
</template>

<template id="template-badge-forma-pagamento-despesa">
    <span class="badge-pagamento debito">DÉBITO</span>
</template>

<template id="template-badge-status-despesa">
    <span class="badge-status badge-em-dia">EM DIA</span>
</template>

<template id="template-celula-checkbox-despesa">
    <input type="checkbox" class="despesa-checkbox">
</template>

<!-- Templates para anexos -->
<template id="template-botao-anexos-com-anexos">
    <button class="btn btn-anexos" data-index="" title="">
        <i class="fas fa-paperclip"></i>
        <span class="contador-anexos"></span>
    </button>
</template>

<template id="template-botao-anexos-sem-anexos">
    <button class="btn btn-anexos btn-anexos-vazio" data-index="" title="Nenhum anexo">
        <i class="fas fa-paperclip"></i>
        <span class="contador-anexos">0</span>
    </button>
</template>


<!-- ======================================================== -->
<!-- MODAL: CONFIRMAÇÃO DE EXCLUSÃO DE DESPESAS -->
<!-- ======================================================== -->
<div id="modal-confirmacao-exclusao-despesa" class="modal">
   <div class="modal-content">
       <div class="modal-header">
           <h3 id="exclusao-titulo">Excluir despesa</h3>
           <span class="close" data-action="fechar-modal-exclusao">&times;</span>
       </div>
       <div class="modal-body">
           <p id="exclusao-mensagem">Como deseja excluir esta despesa?</p>
           <div class="opcoes-exclusao">
               <button id="btn-excluir-todos-meses" class="btn btn-block opcao-exclusao-basica">
                   Excluir Despesa
               </button>
               <button id="btn-excluir-parcela-atual" class="btn btn-block opcao-exclusao-parcelada">
                   Excluir apenas esta parcela
               </button>
               <button id="btn-excluir-parcelas-futuras" class="btn btn-block opcao-exclusao-parcelada">
                   Excluir esta e parcelas futuras
               </button>
               <button id="btn-excluir-todas-parcelas" class="btn btn-block opcao-exclusao-parcelada">
                   Excluir todas as parcelas
               </button>
           </div>
       </div>
   </div>
</div>


<!-- ======================================================== -->
<!-- MODAL: PAGAMENTO INDIVIDUAL -->
<!-- ======================================================== -->
<div id="modal-pagamento-individual" class="modal">
  <div class="modal-content">
      <div class="modal-header">
          <h2>Pagar Despesa</h2>
          <span class="close">&times;</span>
      </div>
      <div class="modal-body">
          <div id="info-despesa-pagamento" class="info-despesa-container">
              <div class="info-item">
                  <span class="info-label">Descrição:</span>
                  <span class="info-valor" id="pagamento-descricao">-</span>
              </div>
              <div class="info-item">
                  <span class="info-label">Categoria:</span>
                  <span class="info-valor" id="pagamento-categoria">-</span>
              </div>
              <div class="info-item" id="pagamento-forma-container">
                  <span class="info-label">Forma de Pagamento:</span>
                  <span class="info-valor" id="pagamento-forma">-</span>
              </div>
              <div class="info-item">
                  <span class="info-label">Valor Original:</span>
                  <span class="info-valor" id="pagamento-valor-original">R$ 0,00</span>
              </div>
          </div>
          
          <form id="form-pagamento-individual">
              <div class="form-group">
                  <label for="valor-pago-individual">Valor Pago:</label>
                  <input type="number" id="valor-pago-individual" class="form-control" step="0.01" min="0">
              </div>
              <div class="form-group">
                <label for="data-pagamento-individual">Data do Pagamento:</label>
                <input type="date" id="data-pagamento-individual" class="form-control">
            </div>
              <div class="form-group">
                  <div class="checkbox-row">
                      <input type="checkbox" id="despesa-quitado-individual">
                      <label for="despesa-quitado-individual">Despesa Quitada</label>
                  </div>
                  <div id="info-parcelas-futuras" class="info-texto hidden">
                      Quando marcado, todas as parcelas futuras serão marcadas como pagas e seus valores zerados.
                  </div>
              </div>
              
              <div class="form-group">
                  <label>Comprovante de Pagamento:</label>
                  <div class="comprovante-anexo-container">
                      <button type="button" id="btn-anexar-comprovante" class="btn-anexar">
                          <i class="fas fa-paperclip"></i> Anexar Comprovante
                      </button>
                  </div>
                  <div id="lista-comprovantes" class="lista-anexos-container">
                      <!-- Comprovantes serão inseridos aqui -->
                  </div>
              </div>
              
              <div class="form-group">
                  <button type="submit" class="btn-submit">Confirmar Pagamento</button>
              </div>
          </form>
      </div>
  </div>
</div>

<!-- ======================================================== -->
<!-- MODAL: PAGAMENTO EM LOTE -->
<!-- ======================================================== -->
<div id="modal-pagamento-lote-despesas" class="modal">
   <div class="modal-content">
       <div class="modal-header">
           <h2>Pagar Despesas em Lote</h2>
           <span class="close">&times;</span>
       </div>
       <div class="modal-body">
           <div class="info-container">
               <p id="lote-contagem-despesas">Você está prestes a pagar despesas em lote.</p>
               <p class="info-texto">O pagamento em lote afeta apenas as despesas do mês atual.</p>
           </div>
           <div class="opcoes-pagamento-lote">
               <button id="btn-pagar-valor-original" class="btn btn-block">
                   Pagar com valores originais
               </button>
               <button id="btn-pagar-com-valor-personalizado" class="btn btn-block">
                   Personalizar valores
               </button>
               <div class="form-group">
                    <label for="data-pagamento-lote">Data do Pagamento (para todas):</label>
                    <input type="date" id="data-pagamento-lote" class="form-control">
                </div>
           </div>
       </div>
   </div>
</div>

<!-- ======================================================== -->
<!-- MODAL: VALORES PERSONALIZADOS -->
<!-- ======================================================== -->
<div id="modal-valores-personalizados-despesas" class="modal">
   <div class="modal-content modal-lg">
       <div class="modal-header">
           <h2>Personalizar Valores de Pagamento</h2>
           <span class="close">&times;</span>
       </div>
       
       <div class="modal-body">
           <p>Defina os valores a serem pagos para cada despesa:</p>
           <div class="tabela-container">
               <table class="tabela-valores-personalizados">
                   <thead>
                       <tr>
                           <th>Descrição</th>
                           <th>Categoria</th>
                           <th>Forma Pagamento</th>
                           <th>Valor Original</th>
                           <th>Valor a Pagar</th>
                       </tr>
                   </thead>
                   <tbody id="valores-personalizados-body"></tbody>
               </table>
           </div>
           <button id="btn-confirmar-valores" class="btn btn-primary">Confirmar Pagamento</button>
       </div>
   </div>
</div>

<!-- ======================================================== -->
<!-- TEMPLATES -->
<!-- ======================================================== -->
<template id="template-linha-valor-personalizado">
   <tr>
       <td class="despesa-descricao">-</td>
       <td class="despesa-categoria">-</td>
       <td class="despesa-forma-pagamento">
           <span class="badge-pagamento">-</span>
       </td>
       <td class="despesa-valor-original">R$ 0,00</td>
       <td>
           <input type="number" class="input-valor-pago" min="0" step="0.01" data-index="">
       </td>
   </tr>
</template>

<!-- ======================================================== -->
<!-- MODAL: SELETOR DE MÊS PARA TRANSAÇÕES RÁPIDAS -->
<!-- ======================================================== -->
<div id="modal-selecionar-mes" class="modal">
    <div class="modal-content modal-medium">
        <div class="modal-header">
            <h2 id="selecionar-mes-titulo">Selecionar Mês</h2>
            <span class="close" data-modal="modal-selecionar-mes">&times;</span>
        </div>
        <div class="modal-body">
            <p>Para qual mês você deseja adicionar a transação?</p>
            <div id="seletor-mes-rapido-grid" class="meses-grid-rapido">
                <button class="mes-btn" data-mes="0">Jan</button>                
                <button class="mes-btn" data-mes="1">Fev</button>
                <button class="mes-btn" data-mes="2">Mar</button>
                <button class="mes-btn" data-mes="3">Abr</button>
                <button class="mes-btn" data-mes="4">Mai</button>
                <button class="mes-btn" data-mes="5">Jun</button>
                <button class="mes-btn" data-mes="6">Jul</button>
                <button class="mes-btn" data-mes="7">Ago</button>
                <button class="mes-btn" data-mes="8">Set</button>
                <button class="mes-btn" data-mes="9">Out</button>
                <button class="mes-btn" data-mes="10">Nov</button>
                <button class="mes-btn" data-mes="11">Dez</button>
            </div>
            <input type="hidden" id="tipo-transacao-rapida">
        </div>
    </div>
</div>

<!-- ================================================================ -->
<!-- TEMPLATES DE MENSAGENS E STATUS (OCULTOS) -->
<!-- ================================================================ -->
<div id="ui-templates" style="display: none;">
    
    <!-- Mensagens de Status do Mês -->
    <div id="template-status-mes-fechado">
        <i class="fas fa-lock"></i> <strong>Mês fechado</strong> - não é possível editar transações
    </div>
    
    <div id="template-status-mes-ativo">
        <i class="fas fa-edit"></i> <strong>Mês ativo</strong> - você pode fechar quando quiser
    </div>
    
    <div id="template-status-mes-vazio">
        <i class="fas fa-plus-circle"></i> Adicione receitas ou despesas para poder fechar o mês
    </div>
    
    <!-- Botões de Controle do Mês -->
    <div id="template-btn-reabrir">
        <button id="btn-reabrir-mes" class="btn btn-warning">
            <i class="fas fa-unlock"></i> Reabrir Mês
        </button>
    </div>
    
    <div id="template-btn-fechar">
        <button id="btn-fechar-mes" class="btn btn-primary">
            <i class="fas fa-lock"></i> Fechar Mês (<span class="saldo-valor"></span>)
        </button>
    </div>
    
    <!-- Títulos com Status -->
    <div id="template-titulo-mes-fechado">
        <i class="fas fa-lock"></i> <span class="mes-nome"></span> de <span class="ano"></span> (Fechado)
    </div>
    
    <div id="template-titulo-mes-ativo">
        <i class="fas fa-chart-bar"></i> <span class="mes-nome"></span> de <span class="ano"></span>
    </div>

</div>

<!-- ======================================================== -->
<!-- MODAIS DE ANEXOS PARA DESPESAS -->
<!-- ======================================================== -->

<!-- Modal: Visualizar anexos da despesa -->
<div id="modal-anexos-despesa" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Anexos da Despesa</h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <div id="lista-anexos-despesa-visualizar" class="lista-anexos-visualizar">
                <!-- Anexos para download serão inseridos aqui -->
            </div>
        </div>
    </div>
</div>

<!-- Templates para anexos -->
<template id="template-anexo-item-despesa">
    <div class="anexo-item">
        <div class="anexo-info">
            <i class="anexo-icone"></i>
            <span class="anexo-nome"></span>
        </div>
        <button class="btn-remover-anexo" data-anexo-id="">
            <i class="fas fa-times"></i>
        </button>
    </div>
</template>

<template id="template-anexo-download-despesa">
    <div class="anexo-download-item">
        <div class="anexo-info">
            <i class="anexo-icone"></i>
            <span class="anexo-nome"></span>
        </div>
        <button class="btn-download-anexo" data-anexo-id="">
            <i class="fas fa-download"></i>
        </button>
    </div>
</template>

<!-- ======================================================== -->
<!-- MODAL: CENTRO DE NOTIFICAÇÕES SIMPLES -->
<!-- ======================================================== -->
<!-- MODAL DE NOTIFICAÇÕES - DESIGN FORMAL E CLEAN -->
<!-- ======================================================== -->
<div id="modal-notificacoes" class="modal hidden">
    <div class="modal-content modal-notificacoes-content">
        <div class="notificacoes-header">
            <h2 class="notificacoes-titulo">
                <i class="fas fa-bell"></i>
                Central de Notificações
            </h2>
            <div class="notificacoes-actions">
                <button id="btn-mark-all-read" class="btn-notif-action" title="Marcar todas como lidas">
                    <i class="fas fa-check"></i>
                </button>
                <button id="btn-clear-notifications" class="btn-notif-action btn-notif-danger" title="Limpar todas">
                    <i class="fas fa-trash"></i>
                </button>
                <button class="close btn-notif-close">&times;</button>
            </div>
        </div>
        <div class="notificacoes-body">
            <div id="notifications-list" class="notificacoes-lista">
                <div class="notification-empty">
                    <i class="fas fa-bell-slash empty-icon-notif"></i>
                    <p class="empty-text-notif">Nenhuma notificação no momento</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Template: Item de Notificação -->
<template id="template-notification-item">
    <div class="notification-item" data-id="" data-tipo="">
        <div class="notification-icon-container">
            <i class="fas notification-icon"></i>
        </div>
        <div class="notification-content">
            <div class="notification-header-inline">
                <h4 class="notification-title"></h4>
                <span class="notification-time"></span>
            </div>
            <p class="notification-message"></p>
        </div>
        <div class="notification-actions">
            <button class="btn-mark-read" title="Marcar como lida">
                <i class="fas fa-check"></i>
            </button>
            <button class="btn-delete-notification" title="Excluir">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
</template>
<template id="template-badge-pagamento">
    <span class="badge-pagamento"></span>
</template>

<template id="template-estrutura-despesas">
    <div class="tab-actions">
        <div class="left-side">
            <button id="btn-nova-despesa" class="btn-action">
                <i class="fas fa-plus-circle"></i> Nova Despesa
            </button>
            <button id="btn-pagar-em-lote" class="btn-action" disabled>
                <i class="fas fa-check-circle"></i> Pagar em Lote
            </button>
        </div>
        
        <div class="right-side">
            <div class="filtros-despesas">
                <select id="filtro-categoria" class="form-control">
                    <option value="todas">Categorias</option>
                </select>
                <select id="filtro-forma-pagamento-tabela" class="form-control">
                    <option value="todas">Forma Pagamento</option>
                    <option value="pix">PIX</option>
                    <option value="debito">Débito</option>
                    <option value="credito">Crédito</option>
                </select>
                <select id="filtro-status" class="form-control">
                    <option value="todas">Status</option>
                    <option value="em_dia">Em Dia</option>
                    <option value="atrasada">Atrasadas</option>
                    <option value="pagas">Pagas</option>
                    <option value="pendentes">Pendentes</option>
                </select>
                <button id="btn-limpar-filtros" class="btn btn-secondary">
                    <i class="fas fa-eraser"></i>
                </button>
                
                <span id="contador-filtro" class="filtro-contador"></span>
            </div>
        </div>
    </div>
    
    <div id="despesas-grid-container" class="despesas-grid">
        <div class="grid-header">
            <div class="col-checkbox">
                <input type="checkbox" id="select-all-despesas" onchange="toggleTodasDespesas(this)">
            </div>
            <div class="col-numero">Nº</div>
            <div class="col-descricao">Descrição</div>
            <div class="col-categoria">Categoria</div>
            <div class="col-forma-pagamento">Pagamento</div>
            <div class="col-valor">Valor</div>
            <div class="col-parcela">Parcela</div>
            <div class="col-valor-pago">Valor Pago</div>
            <div class="col-status">Status</div>
            <div class="col-compra">Compra</div>
            <div class="col-vencimento">Vencimento</div>
            <div class="col-anexos">Anexos</div>
            <div class="col-acoes">Ações</div>
        </div>
        
        <div id="lista-despesas" class="grid-content">
            <!-- Linhas serão inseridas aqui -->
        </div>
    </div>
</template>

<!-- Template para linha de despesa no CSS Grid -->
<template id="template-linha-despesa-grid">
    <div class="grid-row despesa-row">
        <div class="col-checkbox"></div>
        <div class="col-numero"></div>
        <div class="col-descricao"></div>
        <div class="col-categoria"></div>
        <div class="col-forma-pagamento"></div>
        <div class="col-valor"></div>
        <div class="col-parcela"></div>
        <div class="col-valor-pago"></div>
        <div class="col-status"></div>
        <div class="col-compra"></div>
        <div class="col-vencimento"></div>
        <div class="col-anexos"></div>
        <div class="col-acoes"></div>
    </div>
</template>

<!-- Template para botões de ação -->
<template id="template-botoes-acao">
    <div class="acoes-grupo">
        <button class="btn btn-sm btn-editar" title="Editar">
            <i class="fas fa-edit"></i>
        </button>
        <button class="btn btn-sm btn-excluir" title="Excluir">
            <i class="fas fa-trash"></i>
        </button>
        <button class="btn btn-sm btn-pagar" title="Pagar">
            <i class="fas fa-check"></i>
        </button>
        <button class="btn btn-sm btn-mover" title="Mover para próximo mês">
            <i class="fas fa-arrow-right"></i>
        </button>
    </div>
</template>

<!-- Template para valor com juros -->
<template id="template-valor-com-juros">
    <div class="valor-com-juros">
        <span class="valor-original"></span>
        <span class="valor-juros"></span>
    </div>
</template>

<!-- Template para badge de forma de pagamento -->
<template id="template-badge-forma-pagamento">
    <span class="badge-pagamento"></span>
</template>

<!-- Template para badge de status -->
<template id="template-badge-status">
    <span class="badge-status"></span>
</template>

<template id="template-mes-card">
    <div class="mes-header">
        <span class="mes-nome"></span>
        <span class="mes-status"></span>
    </div>
    <div class="mes-body">
        <div class="mes-saldos-container">
            <div class="mes-saldo-anterior hidden">
                <span class="mes-label">Saldo Anterior</span>
                <span class="valor-anterior"></span>
            </div>
            <div class="mes-saldo">
                <span class="mes-label">Saldo Final</span>
                <span class="mes-saldo-valor"></span>
            </div>
        </div>
        <div class="mes-resumo">
            <div class="mes-valor">
                <span class="mes-label">Receitas</span>
                <span class="mes-receita"></span>
            </div>
            <div class="mes-valor">
                <span class="mes-label">Despesas</span>
                <span class="mes-despesa"></span>
            </div>
        </div>
    </div>
    <div class="mes-acoes">
        <button class="btn-mes-acao btn-reabrir hidden">🔓 Reabrir</button>
        <button class="btn-mes-acao btn-fechar hidden">🔒 Fechar</button>
        <button class="btn-mes-acao btn-detalhes"></button>
    </div>
</template>

<div id="modal-feedback-sistema" class="modal">
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h3 id="feedback-titulo">Mensagem</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <div id="feedback-conteudo" class="feedback-message">
                <div id="feedback-icone" class="feedback-icon"></div>
                <p id="feedback-texto">Mensagem</p>
            </div>
            <button id="btn-feedback-ok" class="btn btn-primary btn-block">OK</button>
        </div>
    </div>
</div>


<!-- ================================================================ -->
<!-- CONTROLES DE FECHAMENTO/REABERTURA DE MÊS -->
<!-- ================================================================ -->

<div id="controles-mes" class="controles-mes">
    <div class="status-mes">
        <span id="status-mes-atual" class="status-badge"></span>
    </div>
    <div class="botoes-controle">
        <button id="btn-fechar-mes" class="btn btn-fechar-mes hidden">
            <i class="fas fa-lock"></i> Fechar Mês
        </button>
        <button id="btn-reabrir-mes" class="btn btn-reabrir-mes hidden">
            <i class="fas fa-unlock"></i> Reabrir Mês
        </button>
    </div>
</div>

<!-- ================================================================ -->
<!-- MODAL CONFIRMAÇÃO FECHAMENTO DE MÊS -->
<!-- ================================================================ -->

<div id="modal-confirmar-fechamento" class="modal">
    <div class="modal-content modal-medium">
        <div class="modal-header">
            <h3><i class="fas fa-lock"></i> Fechar Mês</h3>
            <span class="close" data-modal="modal-confirmar-fechamento">&times;</span>
        </div>
        <div class="modal-body">
            <div class="confirmacao-fechamento">
                <p id="mensagem-fechamento" class="texto-confirmacao"></p>
                
                <div class="resumo-fechamento">
                    <h4>Resumo do Mês</h4>
                    <div class="resumo-grid">
                        <div class="item-resumo receitas">
                            <div class="icone">
                                <i class="fas fa-plus-circle"></i>
                            </div>
                            <div class="detalhes">
                                <span class="label">Receitas</span>
                                <span id="resumo-receitas-fechamento" class="valor positivo"></span>
                            </div>
                        </div>
                        
                        <div class="item-resumo despesas">
                            <div class="icone">
                                <i class="fas fa-minus-circle"></i>
                            </div>
                            <div class="detalhes">
                                <span class="label">Despesas</span>
                                <span id="resumo-despesas-fechamento" class="valor negativo"></span>
                            </div>
                        </div>
                        
                        <div class="item-resumo saldo total">
                            <div class="icone">
                                <i class="fas fa-equals"></i>
                            </div>
                            <div class="detalhes">
                                <span class="label">Saldo Final</span>
                                <span id="resumo-saldo-fechamento" class="valor"></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="transferencia-info">
                    <div class="info-box">
                        <i class="fas fa-arrow-right"></i>
                        <p id="info-transferencia"></p>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="btn-cancelar-fechamento" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button id="btn-confirmar-fechamento" class="btn btn-primary">
                    <i class="fas fa-lock"></i> Confirmar Fechamento
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ================================================================ -->
<!-- MODAL CONFIRMAÇÃO REABERTURA DE MÊS -->
<!-- ================================================================ -->

<div id="modal-confirmar-reabertura" class="modal">
    <div class="modal-content modal-medium">
        <div class="modal-header">
            <h3><i class="fas fa-unlock"></i> Reabrir Mês</h3>
            <span class="close" data-modal="modal-confirmar-reabertura">&times;</span>
        </div>
        <div class="modal-body">
            <div class="confirmacao-reabertura">
                <p id="mensagem-reabertura" class="texto-confirmacao"></p>
                
                <div class="aviso-reabertura">
                    <div class="alerta">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div class="alerta-conteudo">
                            <h4>Atenção</h4>
                            <ul>
                                <li>A receita de saldo anterior será removida do próximo mês</li>
                                <li>O saldo do próximo mês será recalculado automaticamente</li>
                                <li>Esta ação afetará todos os cálculos subsequentes</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="info-mes-atual">
                    <h4>Dados do Mês Atual</h4>
                    <div class="dados-mes">
                        <div class="dado-item">
                            <span class="label">Receitas:</span>
                            <span id="reabertura-receitas" class="valor"></span>
                        </div>
                        <div class="dado-item">
                            <span class="label">Despesas:</span>
                            <span id="reabertura-despesas" class="valor"></span>
                        </div>
                        <div class="dado-item">
                            <span class="label">Saldo:</span>
                            <span id="reabertura-saldo" class="valor"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="btn-cancelar-reabertura" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button id="btn-confirmar-reabertura" class="btn btn-danger">
                    <i class="fas fa-unlock"></i> Confirmar Reabertura
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ================================================================ -->
<!-- TEMPLATES PARA NOTIFICAÇÕES DE FECHAMENTO -->
<!-- ================================================================ -->

<template id="template-status-mes-aberto">
    <span class="status-badge aberto">
        <i class="fas fa-unlock"></i> Mês Aberto
    </span>
</template>

<template id="template-status-mes-fechado">
    <span class="status-badge fechado">
        <i class="fas fa-lock"></i> Mês Fechado
    </span>
</template>

<template id="template-notificacao-fechamento-sucesso">
    <div class="notificacao sucesso fechamento">
        <i class="fas fa-check-circle"></i>
        <div class="conteudo">
            <h4>Mês fechado com sucesso!</h4>
            <p class="mensagem"></p>
        </div>
    </div>
</template>

<template id="template-notificacao-reabertura-sucesso">
    <div class="notificacao sucesso reabertura">
        <i class="fas fa-unlock"></i>
        <div class="conteudo">
            <h4>Mês reaberto com sucesso!</h4>
            <p class="mensagem"></p>
        </div>
    </div>
</template>

<template id="template-notificacao-erro-fechamento">
    <div class="notificacao erro fechamento">
        <i class="fas fa-exclamation-circle"></i>
        <div class="conteudo">
            <h4>Erro ao fechar mês</h4>
            <p class="mensagem"></p>
        </div>
    </div>
</template>

<!-- ================================================================ -->
<!-- INDICADORES DE PROCESSAMENTO -->
<!-- ================================================================ -->

<div id="loading-fechamento" class="loading-overlay loading-fechamento hidden">
    <div class="loading-content">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
        </div>
        <div class="loading-texto">
            <h4 id="loading-titulo">Processando...</h4>
            <p id="loading-descricao">Aguarde enquanto processamos a operação</p>
        </div>
    </div>
</div>

<!-- JAVASCRIPT EXTERNOS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Input files para anexos -->
<input type="file" id="input-file-anexos-receita" multiple accept=".pdf,.jpg,.jpeg,.png,.gif" style="display: none;">
<input type="file" id="input-file-anexos-despesa" multiple accept=".pdf,.jpg,.jpeg,.png,.gif" style="display: none;">
<input type="file" id="input-file-comprovante" multiple accept=".pdf,.jpg,.jpeg,.png,.gif" style="display: none;">

<!-- Bibliotecas externas -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<script src="https://sdk.mercadopago.com/js/v2"></script>

<!-- Sistema base -->
<script src="js/usuarioDados.js"></script>
<script src="js/main.js"></script>
<script src="js/logs.js"></script>
<script src="js/configuracao.js"></script>
<script src="js/receita.js"></script>
<script src="js/despesas.js"></script>
<script src="js/anexos.js"></script>

<!-- Loader Global para Importação -->
<div id="global-loader">
    <div class="loader-content">
        <div class="loader-spinner"></div>
        <p class="loader-text">Importando dados...</p>
        <p class="loader-subtext">Por favor, aguarde</p>
        <p class="loader-progress" id="loader-progress"></p>
    </div>
</div>

<!-- Módulos secundários -->
<script src="js/dashboard.js"></script>
<script src="js/notificacao.js"></script>
<script src="js/rel.js"></script>

</body>
</html>